<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Craftinginterpreters/Welcome/Introduction" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Introduction | My Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://jabberwocky238.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://jabberwocky238.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://jabberwocky238.github.io/docs/Craftinginterpreters/Welcome/Introduction"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Introduction | My Site"><meta data-rh="true" name="description" content="Fairy tales are more than true: not because they tell us that dragons exist,"><meta data-rh="true" property="og:description" content="Fairy tales are more than true: not because they tell us that dragons exist,"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://jabberwocky238.github.io/docs/Craftinginterpreters/Welcome/Introduction"><link data-rh="true" rel="alternate" href="https://jabberwocky238.github.io/docs/Craftinginterpreters/Welcome/Introduction" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://jabberwocky238.github.io/docs/Craftinginterpreters/Welcome/Introduction" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="My Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="My Site Atom Feed"><link rel="stylesheet" href="/assets/css/styles.0d35426a.css">
<script src="/assets/js/runtime~main.0868a236.js" defer="defer"></script>
<script src="/assets/js/main.f1c02528.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/jabberwocky238/jabberwocky238.github.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为暗黑模式）" aria-label="切换浅色/暗黑模式（当前为暗黑模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/tutorial---basics">Tutorial - Basics</a><button aria-label="展开侧边栏分类 &#x27;Tutorial - Basics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/tutorial---extras">Tutorial - Extras</a><button aria-label="展开侧边栏分类 &#x27;Tutorial - Extras&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/english">English</a><button aria-label="展开侧边栏分类 &#x27;English&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/crafting-interpreter">Crafting-interpreter</a><button aria-label="折叠侧边栏分类 &#x27;Crafting-interpreter&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/welcome">Welcome</a><button aria-label="折叠侧边栏分类 &#x27;Welcome&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Craftinginterpreters/Welcome/Introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Craftinginterpreters/Welcome/A Map of the Territory">A Map of the Territory</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/not-translated-yet">not-translated-yet</a><button aria-label="展开侧边栏分类 &#x27;not-translated-yet&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/crafting-interpreter"><span itemprop="name">Crafting-interpreter</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/welcome"><span itemprop="name">Welcome</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Introduction</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Introduction</h1></header><blockquote>
<p>Fairy tales are more than true: not because they tell us that dragons exist,
but because they tell us that dragons can be beaten.</p>
<p><cite>G.K. Chesterton by way of Neil Gaiman, <em>Coraline</em></cite></p>
</blockquote>
<p>I&#x27;m really excited we&#x27;re going on this journey together. This is a book on
implementing interpreters for programming languages. It&#x27;s also a book on how to
design a language worth implementing. It&#x27;s the book I wish I&#x27;d had when I first
started getting into languages, and it&#x27;s the book I&#x27;ve been writing in my <span name="head">head</span> for nearly a decade.</p>
<aside name="head">
<p>To my friends and family, sorry I&#x27;ve been so absentminded!</p>
</aside>
<p>In these pages, we will walk step-by-step through two complete interpreters for
a full-featured language. I assume this is your first foray into languages, so
I&#x27;ll cover each concept and line of code you need to build a complete, usable,
fast language implementation.</p>
<p>In order to cram two full implementations inside one book without it turning
into a doorstop, this text is lighter on theory than others. As we build each
piece of the system, I will introduce the history and concepts behind it. I&#x27;ll
try to get you familiar with the lingo so that if you ever find yourself at a
<span name="party">cocktail party</span> full of PL (programming language)
researchers, you&#x27;ll fit in.</p>
<aside name="party">
<p>Strangely enough, a situation I have found myself in multiple times. You
wouldn&#x27;t believe how much some of them can drink.</p>
</aside>
<p>But we&#x27;re mostly going to spend our brain juice getting the language up and
running. This is not to say theory isn&#x27;t important. Being able to reason
precisely and <span name="formal">formally</span> about syntax and semantics is
a vital skill when working on a language. But, personally, I learn best by
doing. It&#x27;s hard for me to wade through paragraphs full of abstract concepts and
really absorb them. But if I&#x27;ve coded something, run it, and debugged it, then I
<em>get</em> it.</p>
<aside name="formal">
<p>Static type systems in particular require rigorous formal reasoning. Hacking on
a type system has the same feel as proving a theorem in mathematics.</p>
<p>It turns out this is no coincidence. In the early half of last century, Haskell
Curry and William Alvin Howard showed that they are two sides of the same coin:
<a href="https://en.wikipedia.org/wiki/Curry%E2%80%93Howard_correspondence" target="_blank" rel="noopener noreferrer">the Curry-Howard isomorphism</a>.</p>
</aside>
<p>That&#x27;s my goal for you. I want you to come away with a solid intuition of how a
real language lives and breathes. My hope is that when you read other, more
theoretical books later, the concepts there will firmly stick in your mind,
adhered to this tangible substrate.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-learn-this-stuff">Why Learn This Stuff?<a href="#why-learn-this-stuff" class="hash-link" aria-label="Why Learn This Stuff?的直接链接" title="Why Learn This Stuff?的直接链接">​</a></h2>
<p>Every introduction to every compiler book seems to have this section. I don&#x27;t
know what it is about programming languages that causes such existential doubt.
I don&#x27;t think ornithology books worry about justifying their existence. They
assume the reader loves birds and start teaching.</p>
<p>But programming languages are a little different. I suppose it is true that the
odds of any of us creating a broadly successful, general-purpose programming
language are slim. The designers of the world&#x27;s widely used languages could fit
in a Volkswagen bus, even without putting the pop-top camper up. If joining that
elite group was the <em>only</em> reason to learn languages, it would be hard to
justify. Fortunately, it isn&#x27;t.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="little-languages-are-everywhere">Little languages are everywhere<a href="#little-languages-are-everywhere" class="hash-link" aria-label="Little languages are everywhere的直接链接" title="Little languages are everywhere的直接链接">​</a></h3>
<p>For every successful general-purpose language, there are a thousand successful
niche ones. We used to call them &quot;little languages&quot;, but inflation in the jargon
economy led to the name &quot;domain-specific languages&quot;. These are pidgins
tailor-built to a specific task. Think application scripting languages, template
engines, markup formats, and configuration files.</p>
<p><span name="little"></span><img decoding="async" loading="lazy" src="image/introduction/little-languages.png" alt="A random selection of little languages." class="img_ev3q"></p>
<aside name="little">
<p>A random selection of some little languages you might run into.</p>
</aside>
<p>Almost every large software project needs a handful of these. When you can, it&#x27;s
good to reuse an existing one instead of rolling your own. Once you factor in
documentation, debuggers, editor support, syntax highlighting, and all of the
other trappings, doing it yourself becomes a tall order.</p>
<p>But there&#x27;s still a good chance you&#x27;ll find yourself needing to whip up a parser
or other tool when there isn&#x27;t an existing library that fits your needs. Even
when you are reusing some existing implementation, you&#x27;ll inevitably end up
needing to debug and maintain it and poke around in its guts.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="languages-are-great-exercise">Languages are great exercise<a href="#languages-are-great-exercise" class="hash-link" aria-label="Languages are great exercise的直接链接" title="Languages are great exercise的直接链接">​</a></h3>
<p>Long distance runners sometimes train with weights strapped to their ankles or
at high altitudes where the atmosphere is thin. When they later unburden
themselves, the new relative ease of light limbs and oxygen-rich air enables
them to run farther and faster.</p>
<p>Implementing a language is a real test of programming skill. The code is complex
and performance critical. You must master recursion, dynamic arrays, trees,
graphs, and hash tables. You probably use hash tables at least in your
day-to-day programming, but do you <em>really</em> understand them? Well, after we&#x27;ve
crafted our own from scratch, I guarantee you will.</p>
<p>While I intend to show you that an interpreter isn&#x27;t as daunting as you might
believe, implementing one well is still a challenge. Rise to it, and you&#x27;ll come
away a stronger programmer, and smarter about how you use data structures and
algorithms in your day job.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="one-more-reason">One more reason<a href="#one-more-reason" class="hash-link" aria-label="One more reason的直接链接" title="One more reason的直接链接">​</a></h3>
<p>This last reason is hard for me to admit, because it&#x27;s so close to my heart.
Ever since I learned to program as a kid, I felt there was something magical
about languages. When I first tapped out BASIC programs one key at a time I
couldn&#x27;t conceive how BASIC <em>itself</em> was made.</p>
<p>Later, the mixture of awe and terror on my college friends&#x27; faces when talking
about their compilers class was enough to convince me language hackers were a
different breed of human -- some sort of wizards granted privileged access to
arcane arts.</p>
<p>It&#x27;s a charming <span name="image">image</span>, but it has a darker side. <em>I</em>
didn&#x27;t feel like a wizard, so I was left thinking I lacked some inborn quality
necessary to join the cabal. Though I&#x27;ve been fascinated by languages ever since
I doodled made-up keywords in my school notebook, it took me decades to muster
the courage to try to really learn them. That &quot;magical&quot; quality, that sense of
exclusivity, excluded <em>me</em>.</p>
<aside name="image">
<p>And its practitioners don&#x27;t hesitate to play up this image. Two of the seminal
texts on programming languages feature a <a href="https://en.wikipedia.org/wiki/Compilers:_Principles,_Techniques,_and_Tools" target="_blank" rel="noopener noreferrer">dragon</a> and a <a href="https://mitpress.mit.edu/sites/default/files/sicp/index.html" target="_blank" rel="noopener noreferrer">wizard</a> on their
covers.</p>
</aside>
<p>When I did finally start cobbling together my own little interpreters, I quickly
learned that, of course, there is no magic at all. It&#x27;s just code, and the
people who hack on languages are just people.</p>
<p>There <em>are</em> a few techniques you don&#x27;t often encounter outside of languages, and
some parts are a little difficult. But not more difficult than other obstacles
you&#x27;ve overcome. My hope is that if you&#x27;ve felt intimidated by languages and
this book helps you overcome that fear, maybe I&#x27;ll leave you just a tiny bit
braver than you were before.</p>
<p>And, who knows, maybe you <em>will</em> make the next great language. Someone has to.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-the-book-is-organized">How the Book Is Organized<a href="#how-the-book-is-organized" class="hash-link" aria-label="How the Book Is Organized的直接链接" title="How the Book Is Organized的直接链接">​</a></h2>
<p>This book is broken into three parts. You&#x27;re reading the first one now. It&#x27;s a
couple of chapters to get you oriented, teach you some of the lingo that
language hackers use, and introduce you to Lox, the language we&#x27;ll be
implementing.</p>
<p>Each of the other two parts builds one complete Lox interpreter. Within those
parts, each chapter is structured the same way. The chapter takes a single
language feature, teaches you the concepts behind it, and walks you through an
implementation.</p>
<p>It took a good bit of trial and error on my part, but I managed to carve up the
two interpreters into chapter-sized chunks that build on the previous chapters
but require nothing from later ones. From the very first chapter, you&#x27;ll have a
working program you can run and play with. With each passing chapter, it grows
increasingly full-featured until you eventually have a complete language.</p>
<p>Aside from copious, scintillating English prose, chapters have a few other
delightful facets:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-code">The code<a href="#the-code" class="hash-link" aria-label="The code的直接链接" title="The code的直接链接">​</a></h3>
<p>We&#x27;re about <em>crafting</em> interpreters, so this book contains real code. Every
single line of code needed is included, and each snippet tells you where to
insert it in your ever-growing implementation.</p>
<p>Many other language books and language implementations use tools like <a href="https://en.wikipedia.org/wiki/Lex_(software)" target="_blank" rel="noopener noreferrer">Lex</a>
and <span name="yacc"><a href="https://en.wikipedia.org/wiki/Yacc" target="_blank" rel="noopener noreferrer">Yacc</a></span>, so-called <strong>compiler-compilers</strong>, that
automatically generate some of the source files for an implementation from some
higher-level description. There are pros and cons to tools like those, and
strong opinions -- some might say religious convictions -- on both sides.</p>
<aside name="yacc">
<p>Yacc is a tool that takes in a grammar file and produces a source file for a
compiler, so it&#x27;s sort of like a &quot;compiler&quot; that outputs a compiler, which is
where we get the term &quot;compiler-compiler&quot;.</p>
<p>Yacc wasn&#x27;t the first of its ilk, which is why it&#x27;s named &quot;Yacc&quot; -- <em>Yet
Another</em> Compiler-Compiler. A later similar tool is <a href="https://en.wikipedia.org/wiki/GNU_bison" target="_blank" rel="noopener noreferrer">Bison</a>, named as a pun on
the pronunciation of Yacc like &quot;yak&quot;.</p>
<img decoding="async" loading="lazy" src="image/introduction/yak.png" alt="A yak." class="img_ev3q">
<p>If you find all of these little self-references and puns charming and fun,
you&#x27;ll fit right in here. If not, well, maybe the language nerd sense of humor
is an acquired taste.</p>
</aside>
<p>We will abstain from using them here. I want to ensure there are no dark corners
where magic and confusion can hide, so we&#x27;ll write everything by hand. As you&#x27;ll
see, it&#x27;s not as bad as it sounds, and it means you really will understand each
line of code and how both interpreters work.</p>
<p>A book has different constraints from the &quot;real world&quot; and so the coding style
here might not always reflect the best way to write maintainable production
software. If I seem a little cavalier about, say, omitting <code>private</code> or
declaring a global variable, understand I do so to keep the code easier on your
eyes. The pages here aren&#x27;t as wide as your IDE and every character counts.</p>
<p>Also, the code doesn&#x27;t have many comments. That&#x27;s because each handful of lines
is surrounded by several paragraphs of honest-to-God prose explaining it. When
you write a book to accompany your program, you are welcome to omit comments
too. Otherwise, you should probably use <code>//</code> a little more than I do.</p>
<p>While the book contains every line of code and teaches what each means, it does
not describe the machinery needed to compile and run the interpreter. I assume
you can slap together a makefile or a project in your IDE of choice in order to
get the code to run. Those kinds of instructions get out of date quickly, and
I want this book to age like XO brandy, not backyard hooch.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="snippets">Snippets<a href="#snippets" class="hash-link" aria-label="Snippets的直接链接" title="Snippets的直接链接">​</a></h3>
<p>Since the book contains literally every line of code needed for the
implementations, the snippets are quite precise. Also, because I try to keep the
program in a runnable state even when major features are missing, sometimes we
add temporary code that gets replaced in later snippets.</p>
<p>A snippet with all the bells and whistles looks like this:</p>
<div class="codehilite">      default:
<div class="source-file"><em>lox/Scanner.java</em><br>
in <em>scanToken<span class="origin-text">/em<span class="translated-text"></span></span><br>
replace 1 line</em></div><em>
<!-- -->        <span class="k">if</span> (<span class="i">isDigit<span class="origin-text">/span<span class="translated-text"><span class="i">c</span></span></span>) {
          <span class="i">number<span class="origin-text">/span<span class="translated-text"></span></span>;
        } <span class="k">else</span> {
          <span class="t">Lox</span>.<span class="i">error<span class="origin-text">/span<span class="translated-text"><span class="i">line</span>, <span class="s">&quot;Unexpected character.&quot;</span></span></span>;
        }
</span></span></span>        break;
</em></div><em>
<div class="source-file-narrow"><em>lox/Scanner.java</em>, in <em>scanToken<span class="origin-text">/em<span class="translated-text"></span></span>, replace 1 line</em></div><em>
<p>In the center, you have the new code to add. It may have a few faded out lines
above or below to show where it goes in the existing surrounding code. There is
also a little blurb telling you in which file and where to place the snippet. If
that blurb says &quot;replace _ lines&quot;, there is some existing code between the faded
lines that you need to remove and replace with the new snippet.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asides">Asides<a href="#asides" class="hash-link" aria-label="Asides的直接链接" title="Asides的直接链接">​</a></h3>
<p><span name="joke">Asides</span> contain biographical sketches, historical
background, references to related topics, and suggestions of other areas to
explore. There&#x27;s nothing that you <em>need</em> to know in them to understand later
parts of the book, so you can skip them if you want. I won&#x27;t judge you, but I
might be a little sad.</p>
<aside name="joke">
<p>Well, some asides do, at least. Most of them are just dumb jokes and amateurish
drawings.</p>
</aside>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="challenges">Challenges<a href="#challenges" class="hash-link" aria-label="Challenges的直接链接" title="Challenges的直接链接">​</a></h3>
<p>Each chapter ends with a few exercises. Unlike textbook problem sets, which tend
to review material you already covered, these are to help you learn <em>more</em> than
what&#x27;s in the chapter. They force you to step off the guided path and explore on
your own. They will make you research other languages, figure out how to
implement features, or otherwise get you out of your comfort zone.</p>
<p><span name="warning">Vanquish</span> the challenges and you&#x27;ll come away with a
broader understanding and possibly a few bumps and scrapes. Or skip them if you
want to stay inside the comfy confines of the tour bus. It&#x27;s your book.</p>
<aside name="warning">
<p>A word of warning: the challenges often ask you to make changes to the
interpreter you&#x27;re building. You&#x27;ll want to implement those in a copy of your
code. The later chapters assume your interpreter is in a pristine
(&quot;unchallenged&quot;?) state.</p>
</aside>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="design-notes">Design notes<a href="#design-notes" class="hash-link" aria-label="Design notes的直接链接" title="Design notes的直接链接">​</a></h3>
<p>Most &quot;programming language&quot; books are strictly programming language
<em>implementation</em> books. They rarely discuss how one might happen to <em>design</em> the
language being implemented. Implementation is fun because it is so <span name="benchmark">precisely defined</span>. We programmers seem to have an
affinity for things that are black and white, ones and zeroes.</p>
<aside name="benchmark">
<p>I know a lot of language hackers whose careers are based on this. You slide a
language spec under their door, wait a few months, and code and benchmark
results come out.</p>
</aside>
<p>Personally, I think the world needs only so many implementations of <span name="fortran">FORTRAN 77</span>. At some point, you find yourself designing a
<em>new</em> language. Once you start playing <em>that</em> game, then the softer, human side
of the equation becomes paramount. Things like which features are easy to learn,
how to balance innovation and familiarity, what syntax is more readable and to
whom.</p>
<aside name="fortran">
<p>Hopefully your new language doesn&#x27;t hardcode assumptions about the width of a
punched card into its grammar.</p>
</aside>
<p>All of that stuff profoundly affects the success of your new language. I want
your language to succeed, so in some chapters I end with a &quot;design note&quot;, a
little essay on some corner of the human aspect of programming languages. I&#x27;m no
expert on this -- I don&#x27;t know if anyone really is -- so take these with a large
pinch of salt. That should make them tastier food for thought, which is my main
aim.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-first-interpreter">The First Interpreter<a href="#the-first-interpreter" class="hash-link" aria-label="The First Interpreter的直接链接" title="The First Interpreter的直接链接">​</a></h2>
<p>We&#x27;ll write our first interpreter, jlox, in <span name="lang">Java</span>. The
focus is on <em>concepts</em>. We&#x27;ll write the simplest, cleanest code we can to
correctly implement the semantics of the language. This will get us comfortable
with the basic techniques and also hone our understanding of exactly how the
language is supposed to behave.</p>
<aside name="lang">
<p>The book uses Java and C, but readers have ported the code to <a href="https://github.com/munificent/craftinginterpreters/wiki/Lox-implementations" target="_blank" rel="noopener noreferrer">many other
languages</a>. If the languages I picked aren&#x27;t your bag, take a look at
those.</p>
</aside>
<p>Java is a great language for this. It&#x27;s high level enough that we don&#x27;t get
overwhelmed by fiddly implementation details, but it&#x27;s still pretty explicit.
Unlike in scripting languages, there tends to be less complex machinery hiding
under the hood, and you&#x27;ve got static types to see what data structures you&#x27;re
working with.</p>
<p>I also chose Java specifically because it is an object-oriented language. That
paradigm swept the programming world in the &#x27;90s and is now the dominant way of
thinking for millions of programmers. Odds are good you&#x27;re already used to
organizing code into classes and methods, so we&#x27;ll keep you in that comfort
zone.</p>
<p>While academic language folks sometimes look down on object-oriented languages,
the reality is that they are widely used even for language work. GCC and LLVM
are written in C++, as are most JavaScript virtual machines. Object-oriented
languages are ubiquitous, and the tools and compilers <em>for</em> a language are often
written <em>in</em> the <span name="host">same language</span>.</p>
<aside name="host">
<p>A compiler reads files in one language, translates them, and outputs files in
another language. You can implement a compiler in any language, including the
same language it compiles, a process called <strong>self-hosting</strong>.</p>
<p>You can&#x27;t compile your compiler using itself yet, but if you have another
compiler for your language written in some other language, you use <em>that</em> one to
compile your compiler once. Now you can use the compiled version of your own
compiler to compile future versions of itself, and you can discard the original
one compiled from the other compiler. This is called <strong>bootstrapping</strong>, from
the image of pulling yourself up by your own bootstraps.</p>
<img decoding="async" loading="lazy" src="image/introduction/bootstrap.png" alt="Fact: This is the primary mode of transportation of the American cowboy." class="img_ev3q">
</aside>
<p>And, finally, Java is hugely popular. That means there&#x27;s a good chance you
already know it, so there&#x27;s less for you to learn to get going in the book. If
you aren&#x27;t that familiar with Java, don&#x27;t freak out. I try to stick to a fairly
minimal subset of it. I use the diamond operator from Java 7 to make things a
little more terse, but that&#x27;s about it as far as &quot;advanced&quot; features go. If you
know another object-oriented language, like C# or C++, you can muddle through.</p>
<p>By the end of part II, we&#x27;ll have a simple, readable implementation. It&#x27;s not
very fast, but it&#x27;s correct. However, we are only able to accomplish that by
building on the Java virtual machine&#x27;s own runtime facilities. We want to learn
how Java <em>itself</em> implements those things.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-second-interpreter">The Second Interpreter<a href="#the-second-interpreter" class="hash-link" aria-label="The Second Interpreter的直接链接" title="The Second Interpreter的直接链接">​</a></h2>
<p>So in the next part, we start all over again, but this time in C. C is the
perfect language for understanding how an implementation <em>really</em> works, all the
way down to the bytes in memory and the code flowing through the CPU.</p>
<p>A big reason that we&#x27;re using C is so I can show you things C is particularly
good at, but that <em>does</em> mean you&#x27;ll need to be pretty comfortable with it. You
don&#x27;t have to be the reincarnation of Dennis Ritchie, but you shouldn&#x27;t be
spooked by pointers either.</p>
<p>If you aren&#x27;t there yet, pick up an introductory book on C and chew through it,
then come back here when you&#x27;re done. In return, you&#x27;ll come away from this book
an even stronger C programmer. That&#x27;s useful given how many language
implementations are written in C: Lua, CPython, and Ruby&#x27;s MRI, to name a few.</p>
<p>In our C interpreter, <span name="clox">clox</span>, we are forced to implement
for ourselves all the things Java gave us for free. We&#x27;ll write our own dynamic
array and hash table. We&#x27;ll decide how objects are represented in memory, and
build a garbage collector to reclaim them.</p>
<aside name="clox">
<p>I pronounce the name like &quot;sea-locks&quot;, but you can say it &quot;clocks&quot; or even
&quot;cloch&quot;, where you pronounce the &quot;x&quot; like the Greeks do if it makes you happy.</p>
</aside>
<p>Our Java implementation was focused on being correct. Now that we have that
down, we&#x27;ll turn to also being <em>fast</em>. Our C interpreter will contain a <span name="compiler">compiler</span> that translates Lox to an efficient bytecode
representation (don&#x27;t worry, I&#x27;ll get into what that means soon), which it then
executes. This is the same technique used by implementations of Lua, Python,
Ruby, PHP, and many other successful languages.</p>
<aside name="compiler">
<p>Did you think this was just an interpreter book? It&#x27;s a compiler book as well.
Two for the price of one!</p>
</aside>
<p>We&#x27;ll even try our hand at benchmarking and optimization. By the end, we&#x27;ll have
a robust, accurate, fast interpreter for our language, able to keep up with
other professional caliber implementations out there. Not bad for one book and a
few thousand lines of code.</p>
<div class="challenges">
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="challenges-1">Challenges<a href="#challenges-1" class="hash-link" aria-label="Challenges的直接链接" title="Challenges的直接链接">​</a></h2>
<ol>
<li>
<p>There are at least six domain-specific languages used in the <a href="https://github.com/munificent/craftinginterpreters" target="_blank" rel="noopener noreferrer">little system
I cobbled together</a> to write and publish this book. What are they?</p>
</li>
<li>
<p>Get a &quot;Hello, world!&quot; program written and running in Java. Set up whatever
makefiles or IDE projects you need to get it working. If you have a
debugger, get comfortable with it and step through your program as it runs.</p>
</li>
<li>
<p>Do the same thing for C. To get some practice with pointers, define a
<a href="https://en.wikipedia.org/wiki/Doubly_linked_list" target="_blank" rel="noopener noreferrer">doubly linked list</a> of heap-allocated strings. Write functions to insert,
find, and delete items from it. Test them.</p>
</li>
</ol>
</div>
<div class="design-note">
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="design-note-whats-in-a-name">Design Note: What&#x27;s in a Name?<a href="#design-note-whats-in-a-name" class="hash-link" aria-label="Design Note: What&#x27;s in a Name?的直接链接" title="Design Note: What&#x27;s in a Name?的直接链接">​</a></h2>
<p>One of the hardest challenges in writing this book was coming up with a name for
the language it implements. I went through <em>pages</em> of candidates before I found
one that worked. As you&#x27;ll discover on the first day you start building your own
language, naming is deviously hard. A good name satisfies a few criteria:</p>
<ol>
<li>
<p><strong>It isn&#x27;t in use.</strong> You can run into all sorts of trouble, legal and
social, if you inadvertently step on someone else&#x27;s name.</p>
</li>
<li>
<p><strong>It&#x27;s easy to pronounce.</strong> If things go well, hordes of people will be
saying and writing your language&#x27;s name. Anything longer than a couple of
syllables or a handful of letters will annoy them to no end.</p>
</li>
<li>
<p><strong>It&#x27;s distinct enough to search for.</strong> People will Google your language&#x27;s
name to learn about it, so you want a word that&#x27;s rare enough that most
results point to your docs. Though, with the amount of AI search engines are
packing today, that&#x27;s less of an issue. Still, you won&#x27;t be doing your users
any favors if you name your language &quot;for&quot;.</p>
</li>
<li>
<p><strong>It doesn&#x27;t have negative connotations across a number of cultures.</strong> This
is hard to be on guard for, but it&#x27;s worth considering. The designer of
Nimrod ended up renaming his language to &quot;Nim&quot; because too many people
remember that Bugs Bunny used &quot;Nimrod&quot; as an insult. (Bugs was using it
ironically.)</p>
</li>
</ol>
<p>If your potential name makes it through that gauntlet, keep it. Don&#x27;t get hung
up on trying to find an appellation that captures the quintessence of your
language. If the names of the world&#x27;s other successful languages teach us
anything, it&#x27;s that the name doesn&#x27;t matter much. All you need is a reasonably
unique token.</p>
</div>
</em></em></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/jabberwocky238/jabberwocky238.github.io/docs/Craftinginterpreters/Welcome/Introduction.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/welcome"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Welcome</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Craftinginterpreters/Welcome/A Map of the Territory"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">A Map of the Territory</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-learn-this-stuff" class="table-of-contents__link toc-highlight">Why Learn This Stuff?</a><ul><li><a href="#little-languages-are-everywhere" class="table-of-contents__link toc-highlight">Little languages are everywhere</a></li><li><a href="#languages-are-great-exercise" class="table-of-contents__link toc-highlight">Languages are great exercise</a></li><li><a href="#one-more-reason" class="table-of-contents__link toc-highlight">One more reason</a></li></ul></li><li><a href="#how-the-book-is-organized" class="table-of-contents__link toc-highlight">How the Book Is Organized</a><ul><li><a href="#the-code" class="table-of-contents__link toc-highlight">The code</a></li><li><a href="#snippets" class="table-of-contents__link toc-highlight">Snippets</a></li><li><a href="#asides" class="table-of-contents__link toc-highlight">Asides</a></li><li><a href="#challenges" class="table-of-contents__link toc-highlight">Challenges</a></li><li><a href="#design-notes" class="table-of-contents__link toc-highlight">Design notes</a></li></ul></li><li><a href="#the-first-interpreter" class="table-of-contents__link toc-highlight">The First Interpreter</a></li><li><a href="#the-second-interpreter" class="table-of-contents__link toc-highlight">The Second Interpreter</a></li><li><a href="#challenges-1" class="table-of-contents__link toc-highlight">Challenges</a></li><li><a href="#design-note-whats-in-a-name" class="table-of-contents__link toc-highlight">Design Note: What&#39;s in a Name?</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>