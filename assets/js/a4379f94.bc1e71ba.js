"use strict";(self.webpackChunkjabberwocky238_github_io=self.webpackChunkjabberwocky238_github_io||[]).push([[1840],{133:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>o,contentTitle:()=>i,default:()=>x,frontMatter:()=>c,metadata:()=>l,toc:()=>h});var s=r(4848),d=r(8453);const c={sidebar_position:9,sidebar_label:"\u5c5e\u6027\u5b8f(attribute macros)",sidebar_class_name:"green"},i="\u5c5e\u6027\u5b8f",l={id:"attr_macros",title:"\u5c5e\u6027\u5b8f",description:"\u7528\u4e8e\u914d\u7f6e\u7f16\u8bd1\u5668\u7684\u884c\u4e3a\u6216\u8005\u63d0\u4f9b\u5143\u6570\u636e\u3002",source:"@site/docs/rust/09-attr_macros.md",sourceDirName:".",slug:"/attr_macros",permalink:"/rust/attr_macros",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:9,frontMatter:{sidebar_position:9,sidebar_label:"\u5c5e\u6027\u5b8f(attribute macros)",sidebar_class_name:"green"},sidebar:"tutorialSidebar",previous:{title:"\ud83d\udca9\u8fc7\u7a0b\u5b8f proc macros",permalink:"/rust/proc_macros"},next:{title:"\ud83d\udca9\u6d3e\u751f\u5b8f proc macro derive",permalink:"/rust/derive_macros"}},o={},h=[{value:"#![doc]",id:"doc",level:2},{value:"#![doc(html_root_url)]",id:"dochtml_root_url",level:3},{value:"#![doc(html_favicon_url)]",id:"dochtml_favicon_url",level:3},{value:"#![doc(no_inline)]",id:"docno_inline",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:4},{value:"#[doc(hidden)]",id:"dochidden",level:3},{value:"#![cfg_attr]",id:"cfg_attr",level:2},{value:"#![cfg]",id:"cfg",level:2},{value:"#![deprecated]",id:"deprecated",level:2},{value:"#[macro]",id:"macro",level:2},{value:"#[macro_use]",id:"macro_use",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b-1",level:4},{value:"#[macro_export]",id:"macro_export",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b-2",level:4},{value:"\u6ce8\u610f\u4e8b\u9879",id:"\u6ce8\u610f\u4e8b\u9879",level:4},{value:"Built-in",id:"built-in",level:2},{value:"#[allow()] / #[warn()] / #![deny()]",id:"allow--warn--deny",level:3},{value:"#[inline]",id:"inline",level:3},{value:"\u4f7f\u7528\u573a\u666f",id:"\u4f7f\u7528\u573a\u666f",level:4},{value:"\u793a\u4f8b",id:"\u793a\u4f8b-3",level:4},{value:"\u6ce8\u610f\u4e8b\u9879",id:"\u6ce8\u610f\u4e8b\u9879-1",level:4},{value:"#[path]",id:"path",level:3},{value:"#[must_use]",id:"must_use",level:3},{value:"#[non_exhaustive]",id:"non_exhaustive",level:3},{value:"\u4f5c\u7528",id:"\u4f5c\u7528",level:4},{value:"#[repr]",id:"repr",level:3},{value:"#[repr(C)]",id:"reprc",level:4},{value:"#[repr(isize)]",id:"reprisize",level:4},{value:"#[repr(u8)]",id:"repru8",level:4},{value:"#[repr(transparent)]",id:"reprtransparent",level:4}];function t(n){const e={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"\u5c5e\u6027\u5b8f",children:"\u5c5e\u6027\u5b8f"})}),"\n",(0,s.jsx)(e.p,{children:"\u7528\u4e8e\u914d\u7f6e\u7f16\u8bd1\u5668\u7684\u884c\u4e3a\u6216\u8005\u63d0\u4f9b\u5143\u6570\u636e\u3002"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"#![doc]"}),"\u548c",(0,s.jsx)(e.code,{children:"#[doc]"}),"\u7684\u533a\u522b\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"#![doc]"})," \u662f\u4e00\u4e2a crate \u5c5e\u6027\u5b8f\uff0c\u5b83\u7528\u4e8e\u914d\u7f6e\u6574\u4e2a crate \u7684\u6587\u6863\u751f\u6210\u884c\u4e3a\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:'#![doc(html_root_url = "https://docs.rs/nalgebra/0.25.0")]'})," \u6765\u6307\u5b9a\u751f\u6210\u7684\u6587\u6863\u7684\u6839 URL\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"#[doc]"})," \u662f\u4e00\u4e2a\u9879\u5c5e\u6027\u5b8f\uff0c\u5b83\u7528\u4e8e\u914d\u7f6e\u5355\u4e2a\u9879\uff08\u4f8b\u5982\u51fd\u6570\u3001\u7ed3\u6784\u4f53\u3001\u679a\u4e3e\u7b49\uff09\u7684\u6587\u6863\u751f\u6210\u884c\u4e3a\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"#[doc(hidden)]"})," \u6765\u9690\u85cf\u67d0\u4e2a\u9879\u7684\u6587\u6863\u3002"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"doc",children:"#![doc]"}),"\n",(0,s.jsx)(e.h3,{id:"dochtml_root_url",children:"#![doc(html_root_url)]"}),"\n",(0,s.jsx)(e.h3,{id:"dochtml_favicon_url",children:"#![doc(html_favicon_url)]"}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u662f\u4e00\u4e2a\u6587\u6863\u5c5e\u6027\u5b8f\uff0c\u5b83\u544a\u8bc9 Rust \u6587\u6863\u751f\u6210\u5668\u5728\u751f\u6210\u6587\u6863\u65f6\uff0c\u5c06 Serde \u7c7b\u578b\u94fe\u63a5\u5230\u6307\u5b9a\u7684 URL\u3002\u8fd9\u610f\u5473\u7740\u5f53\u5176\u4ed6 crate \u7684\u6587\u6863\u4e2d\u5f15\u7528\u4e86 Serde \u7c7b\u578b\u65f6\uff0c\u5b83\u4eec\u4f1a\u88ab\u94fe\u63a5\u5230\u8fd9\u4e2a URL \u4e0a\u7684\u76f8\u5e94\u6587\u6863\u9875\u9762\u3002"}),"\n",(0,s.jsx)(e.admonition,{title:"nalgebra/src/lib.rs, line 92",type:"info",children:(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:'#![doc(\r\n   html_favicon_url = "https://nalgebra.org/img/favicon.ico",\r\n   html_root_url = "https://docs.rs/nalgebra/0.25.0"\r\n)]\n'})})}),"\n",(0,s.jsx)(e.h3,{id:"docno_inline",children:"#![doc(no_inline)]"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"#![doc(no_inline)]"}),"\u662f Rust \u8bed\u8a00\u4e2d\u7684\u4e00\u4e2a\u5c5e\u6027\u5b8f\uff0c\u7528\u4e8e\u63a7\u5236\u6587\u6863\u751f\u6210\u65f6\u7684\u884c\u4e3a\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u8fd9\u4e2a\u5c5e\u6027\u5b8f\u7684\u4f5c\u7528\u662f\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u963b\u6b62\u5185\u8054\u6587\u6863"}),"\uff1a\u5f53\u8fd9\u4e2a\u5c5e\u6027\u5b8f\u5e94\u7528\u4e8e\u4e00\u4e2a\u51fd\u6570\u3001\u7ed3\u6784\u4f53\u3001\u679a\u4e3e\u3001\u6a21\u5757\u6216\u5176\u4ed6\u9879\u65f6\uff0c\u5b83\u4f1a\u963b\u6b62 Rust \u7684\u6587\u6863\u751f\u6210\u5de5\u5177 ",(0,s.jsx)(e.code,{children:"rustdoc"})," \u5c06\u8be5\u9879\u7684\u6587\u6863\u6ce8\u91ca\u5185\u8054\u5230\u5f15\u7528\u5b83\u7684\u5730\u65b9\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c",(0,s.jsx)(e.code,{children:"rustdoc"})," \u4f1a\u5c06\u6587\u6863\u6ce8\u91ca\u4ece\u6e90\u4ee3\u7801\u7684\u4f4d\u7f6e\u590d\u5236\u5230\u5f15\u7528\u8be5\u9879\u7684\u6bcf\u4e2a\u5730\u65b9\u3002\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"#[doc(no_inline)]"})," \u53ef\u4ee5\u8986\u76d6\u8fd9\u4e2a\u9ed8\u8ba4\u884c\u4e3a\u3002"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u4e2a\u5c5e\u6027\u901a\u5e38\u7528\u4e8e\u4ee5\u4e0b\u60c5\u51b5\uff1a"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u907f\u514d\u91cd\u590d\u6587\u6863"}),"\uff1a\u5982\u679c\u4f60\u4e0d\u5e0c\u671b\u67d0\u4e2a\u9879\u7684\u6587\u6863\u6ce8\u91ca\u5728\u6587\u6863\u4e2d\u7684\u591a\u4e2a\u5730\u65b9\u91cd\u590d\u51fa\u73b0\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"#[doc(no_inline)]"})," \u6765\u9632\u6b62\u8fd9\u79cd\u60c5\u51b5\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u96c6\u4e2d\u6587\u6863"}),"\uff1a\u6709\u65f6\u5019\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u6240\u6709\u7684\u6587\u6863\u90fd\u5728\u4e00\u4e2a\u5730\u65b9\uff0c\u800c\u4e0d\u662f\u5206\u6563\u5728\u591a\u4e2a\u5f15\u7528\u70b9\u3002\u4f7f\u7528\u8fd9\u4e2a\u5c5e\u6027\u5b8f\u53ef\u4ee5\u786e\u4fdd\u6587\u6863\u53ea\u5728\u4e00\u4e2a\u5730\u65b9\u751f\u6210\uff0c\u4ece\u800c\u66f4\u5bb9\u6613\u7ef4\u62a4\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n",(0,s.jsx)(e.p,{children:"\u5047\u8bbe\u4f60\u6709\u4ee5\u4e0b\u4ee3\u7801\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:"/// \u6587\u6863\u6ce8\u91ca\r\n#[doc(no_inline)]\r\npub fn my_function() {\r\n   // \u51fd\u6570\u5b9e\u73b0\r\n}\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c",(0,s.jsx)(e.code,{children:"my_function"})," \u7684\u6587\u6863\u6ce8\u91ca\u4e0d\u4f1a\u88ab ",(0,s.jsx)(e.code,{children:"rustdoc"})," \u5185\u8054\u5230\u5f15\u7528 ",(0,s.jsx)(e.code,{children:"my_function"})," \u7684\u5730\u65b9\u3002\u8fd9\u610f\u5473\u7740\u65e0\u8bba\u5728\u6587\u6863\u7684\u54ea\u4e2a\u5730\u65b9\u5f15\u7528\u4e86 ",(0,s.jsx)(e.code,{children:"my_function"}),"\uff0c\u90fd\u4e0d\u4f1a\u663e\u793a\u8fd9\u4e2a\u51fd\u6570\u7684\u6587\u6863\u6ce8\u91ca\uff0c\u9664\u975e\u4f60\u76f4\u63a5\u67e5\u770b ",(0,s.jsx)(e.code,{children:"my_function"})," \u7684\u6587\u6863\u9875\u9762\u3002\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"#[doc(no_inline)]"})," \u53ef\u4ee5\u5e2e\u52a9\u4f60\u66f4\u7cbe\u7ec6\u5730\u63a7\u5236\u6587\u6863\u7684\u5e03\u5c40\u548c\u5185\u5bb9\u3002"]}),"\n",(0,s.jsx)(e.h3,{id:"dochidden",children:"#[doc(hidden)]"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8fd9\u662f\u4e00\u4e2a\u5c5e\u6027\u5b8f\uff0c\u7528\u4e8e\u6307\u793a\u8be5\u5b8f\u5728\u751f\u6210\u7684\u6587\u6863\u4e2d\u5e94\u8be5\u662f\u9690\u85cf\u7684\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u5f53\u4f60\u4e0d\u5e0c\u671b\u67d0\u4e2a\u5b8f\u51fa\u73b0\u5728\u6587\u6863\u4e2d\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u5c5e\u6027\u5b8f\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:'// Used by generated code and doc tests. Not public API.\r\n#[doc(hidden)]\r\n#[path = "private/mod.rs"]\r\npub mod __private;\n'})}),"\n",(0,s.jsx)(e.h2,{id:"cfg_attr",children:"#![cfg_attr]"}),"\n",(0,s.jsxs)(e.ol,{start:"2",children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:'#![cfg_attr(not(feature = "std"), no_std)]'}),"\r\n\u8fd9\u4e2a\u5c5e\u6027\u5b8f\u7528\u4e8e\u6761\u4ef6\u7f16\u8bd1\u3002",(0,s.jsx)(e.code,{children:"cfg_attr"})," \u5b8f\u68c0\u67e5\u662f\u5426\u6ca1\u6709\u542f\u7528 ",(0,s.jsx)(e.code,{children:"std"})," \u7279\u6027\uff08\u901a\u8fc7 ",(0,s.jsx)(e.code,{children:'feature = "std"'})," \u6307\u5b9a\uff09\u3002\u5982\u679c\u6ca1\u6709\u542f\u7528 ",(0,s.jsx)(e.code,{children:"std"})," \u7279\u6027\uff0c\u90a3\u4e48 ",(0,s.jsx)(e.code,{children:"no_std"})," \u5c5e\u6027\u4f1a\u88ab\u5e94\u7528\uff0c\u5141\u8bb8 crate \u5728\u4e0d\u4f9d\u8d56\u6807\u51c6\u5e93\u7684\u60c5\u51b5\u4e0b\u7f16\u8bd1\u3002\u8fd9\u5bf9\u4e8e\u7f16\u5199\u53ef\u4ee5\u7528\u4e8e\u5d4c\u5165\u5f0f\u7cfb\u7edf\u6216\u5176\u4ed6\u4e0d\u5305\u542b\u6807\u51c6\u5e93\u7684\u73af\u5883\u4e2d\u7684\u4ee3\u7801\u975e\u5e38\u6709\u7528\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"#![cfg_attr(docsrs, feature(doc_cfg, rustdoc_internals))]"}),"\r\n\u8fd9\u4e2a\u5c5e\u6027\u5b8f\u7528\u4e8e\u5728\u751f\u6210\u6587\u6863\u65f6\u542f\u7528\u7279\u5b9a\u7684 Rust \u7f16\u8bd1\u5668\u7279\u6027\u3002",(0,s.jsx)(e.code,{children:"cfg_attr"})," \u5b8f\u68c0\u67e5\u662f\u5426\u5728 ",(0,s.jsx)(e.code,{children:"docsrs"})," \u73af\u5883\u4e0b\uff08\u901a\u5e38\u7528\u4e8e\u6587\u6863\u751f\u6210\uff09\uff0c\u5982\u679c\u662f\uff0c\u5219\u542f\u7528 ",(0,s.jsx)(e.code,{children:"doc_cfg"})," \u548c ",(0,s.jsx)(e.code,{children:"rustdoc_internals"})," \u7279\u6027\u3002",(0,s.jsx)(e.code,{children:"doc_cfg"})," \u5141\u8bb8\u5728\u6587\u6863\u4e2d\u4f7f\u7528\u6761\u4ef6\u7f16\u8bd1\u5c5e\u6027\uff0c\u800c ",(0,s.jsx)(e.code,{children:"rustdoc_internals"})," \u542f\u7528\u4e86\u4e00\u4e9b Rust \u6587\u6863\u5de5\u5177\u7684\u5185\u90e8\u7279\u6027\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"#![cfg_attr(docsrs, allow(internal_features)))"}),"\r\n\u8fd9\u4e2a\u5c5e\u6027\u5b8f\u540c\u6837\u7528\u4e8e\u6761\u4ef6\u7f16\u8bd1\u3002\u5b83\u5141\u8bb8\u5728 ",(0,s.jsx)(e.code,{children:"docsrs"})," \u73af\u5883\u4e0b\u4f7f\u7528\u5185\u90e8\u7279\u6027\uff0c\u8fd9\u4e9b\u7279\u6027\u901a\u5e38\u4e0d\u63a8\u8350\u5728\u666e\u901a\u4ee3\u7801\u4e2d\u4f7f\u7528\uff0c\u56e0\u4e3a\u5b83\u4eec\u53ef\u80fd\u4f1a\u5728\u672a\u6765\u7684 Rust \u7248\u672c\u4e2d\u6539\u53d8\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["\u8fd9\u4e9b\u5c5e\u6027\u5b8f\u901a\u5e38\u7528\u4e8e\u5e93\u7684 ",(0,s.jsx)(e.code,{children:"lib.rs"})," \u6216 ",(0,s.jsx)(e.code,{children:"main.rs"})," \u6587\u4ef6\u7684\u9876\u90e8\uff0c\u4ee5\u914d\u7f6e\u5e93\u7684\u7f16\u8bd1\u548c\u6587\u6863\u751f\u6210\u884c\u4e3a\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:'#[cfg_attr(\r\n    not(no_diagnostic_namespace),\r\n    diagnostic::on_unimplemented(\r\n        note = "for local types consider adding `#[derive(serde::Deserialize)]` to your `{Self}` type",\r\n        note = "for types from other crates check whether the crate offers a `serde` feature flag",\r\n    )\r\n)]\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u6bb5\u4ee3\u7801\u662f Rust \u8bed\u8a00\u4e2d\u4f7f\u7528\u5c5e\u6027\u5b8f\u7684\u4e00\u4e2a\u4f8b\u5b50\uff0c\u7528\u4e8e\u6761\u4ef6\u7f16\u8bd1\u548c\u81ea\u5b9a\u4e49\u8bca\u65ad\u4fe1\u606f\u3002\u8ba9\u6211\u4eec\u9010\u884c\u5206\u6790\uff1a"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"#[cfg_attr(...)]"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"cfg_attr"})," \u662f Rust \u7684\u4e00\u4e2a\u5c5e\u6027\u5b8f\uff0c\u5b83\u5141\u8bb8\u5f00\u53d1\u8005\u6839\u636e\u7279\u5b9a\u7684\u7f16\u8bd1\u65f6\u914d\u7f6e\uff08feature flags\uff09\u6765\u5305\u542b\u6216\u6392\u9664\u4ee3\u7801\u3002\u5982\u679c\u62ec\u53f7\u5185\u7684\u6761\u4ef6\u4e3a\u771f\uff0c\u5219\u5305\u542b\u8be5\u5c5e\u6027\u5b8f\u540e\u9762\u7684\u4ee3\u7801\uff1b\u5982\u679c\u6761\u4ef6\u4e3a\u5047\uff0c\u5219\u5ffd\u7565\u5b83\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"not(no_diagnostic_namespace)"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u8fd9\u662f ",(0,s.jsx)(e.code,{children:"cfg_attr"})," \u5b8f\u7684\u6761\u4ef6\u90e8\u5206\u3002",(0,s.jsx)(e.code,{children:"not"})," \u662f\u4e00\u4e2a\u68c0\u67e5\u7279\u5f81\uff08feature\uff09\u662f\u5426\u6ca1\u6709\u88ab\u5b9a\u4e49\u7684\u6761\u4ef6\u3002\u8fd9\u91cc\u68c0\u67e5\u7684\u662f\u6ca1\u6709\u5b9a\u4e49 ",(0,s.jsx)(e.code,{children:"no_diagnostic_namespace"})," \u7279\u5f81\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"diagnostic::on_unimplemented(...)"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u5982\u679c\u4e0a\u9762\u7684\u6761\u4ef6\u6ee1\u8db3\uff08\u5373\u6ca1\u6709\u5b9a\u4e49 ",(0,s.jsx)(e.code,{children:"no_diagnostic_namespace"})," \u7279\u5f81\uff09\uff0c\u5219\u5e94\u7528 ",(0,s.jsx)(e.code,{children:"diagnostic::on_unimplemented"})," \u5c5e\u6027\u5b8f\u3002\u8fd9\u4e2a\u5b8f\u7528\u4e8e\u5728\u67d0\u4e2a trait \u6ca1\u6709\u4e3a\u7279\u5b9a\u7c7b\u578b\u5b9e\u73b0\u65f6\uff0c\u63d0\u4f9b\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u9519\u8bef\u6216\u63d0\u793a\u4fe1\u606f\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:'note = "for local types consider adding '}),"#[derive(serde::Deserialize)]",(0,s.jsx)(e.code,{children:"to your"}),"{Self}",(0,s.jsx)(e.code,{children:' type",'})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u8fd9\u662f ",(0,s.jsx)(e.code,{children:"diagnostic::on_unimplemented"})," \u5b8f\u7684\u4e00\u4e2a\u53c2\u6570\uff0c\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5907\u6ce8\u4fe1\u606f\u3002\u5f53\u4e00\u4e2a\u7c7b\u578b\u6ca1\u6709\u5b9e\u73b0\u67d0\u4e2a trait\uff0c\u5e76\u4e14\u8fd9\u4e2a trait \u662f\u5e8f\u5217\u5316\u76f8\u5173\u7684\uff08\u5982 ",(0,s.jsx)(e.code,{children:"serde::Deserialize"}),"\uff09\uff0c\u8fd9\u4e2a\u5907\u6ce8\u4f1a\u63d0\u793a\u5f00\u53d1\u8005\u8003\u8651\u4e3a\u4ed6\u4eec\u7684\u7c7b\u578b\u6dfb\u52a0 ",(0,s.jsx)(e.code,{children:"#[derive(serde::Deserialize)]"})," \u5b8f\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:'note = "for types from other crates check whether the crate offers a '}),"serde",(0,s.jsx)(e.code,{children:' feature flag",'})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u8fd9\u662f\u53e6\u4e00\u4e2a\u5907\u6ce8\u4fe1\u606f\uff0c\u7528\u4e8e\u63d0\u793a\u5f00\u53d1\u8005\u5982\u679c\u7c7b\u578b\u6765\u81ea\u5176\u4ed6 crate\uff0c\u5e94\u8be5\u68c0\u67e5\u90a3\u4e2a crate \u662f\u5426\u63d0\u4f9b\u4e86\u4e00\u4e2a ",(0,s.jsx)(e.code,{children:"serde"})," \u7279\u6027\u6807\u5fd7\uff08feature flag\uff09\uff0c\u8fd9\u53ef\u80fd\u5141\u8bb8\u4f7f\u7528\u5e8f\u5217\u5316\u529f\u80fd\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u7efc\u5408\u6765\u770b\uff0c\u8fd9\u6bb5\u4ee3\u7801\u7684\u4f5c\u7528\u662f\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u5f53\u6ca1\u6709\u5b9a\u4e49 ",(0,s.jsx)(e.code,{children:"no_diagnostic_namespace"})," \u7279\u5f81\u65f6\uff0c\u5982\u679c\u67d0\u4e2a\u7c7b\u578b\u6ca1\u6709\u5b9e\u73b0 ",(0,s.jsx)(e.code,{children:"serde::Deserialize"})," trait\uff0c\u7f16\u8bd1\u5668\u4f1a\u63d0\u4f9b\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u9519\u8bef\u63d0\u793a\uff0c\u6307\u5bfc\u5f00\u53d1\u8005\u5982\u4f55\u89e3\u51b3\u95ee\u9898\u3002"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u79cd\u81ea\u5b9a\u4e49\u7684\u8bca\u65ad\u4fe1\u606f\u975e\u5e38\u6709\u7528\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u63d0\u4f9b\u66f4\u6e05\u6670\u7684\u9519\u8bef\u4fe1\u606f\u548c\u89e3\u51b3\u95ee\u9898\u7684\u6307\u5bfc\uff0c\u4ece\u800c\u6539\u5584\u5f00\u53d1\u8005\u7684\u4f53\u9a8c\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"cfg",children:"#![cfg]"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:'#[cfg(all(feature = "alloc", not(feature = "std")))] pub use alloc::borrow::{Cow, ToOwned};'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u8fd9\u884c\u4ee3\u7801\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"cfg"})," \u5c5e\u6027\u5b8f\u8fdb\u884c\u6761\u4ef6\u7f16\u8bd1\u3002",(0,s.jsx)(e.code,{children:"cfg"})," \u5b8f\u5141\u8bb8\u5f00\u53d1\u8005\u6839\u636e\u7f16\u8bd1\u65f6\u7684\u7279\u5f81\uff08features\uff09\u6765\u5305\u542b\u6216\u6392\u9664\u4ee3\u7801\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"all"})," \u51fd\u6570\u7528\u4e8e\u786e\u4fdd\u6240\u6709\u5217\u51fa\u7684\u6761\u4ef6\u90fd\u5fc5\u987b\u4e3a\u771f\uff0c\u624d\u80fd\u7f16\u8bd1\u8fd9\u6bb5\u4ee3\u7801\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:'feature = "alloc"'})," \u68c0\u67e5\u662f\u5426\u542f\u7528\u4e86 ",(0,s.jsx)(e.code,{children:"alloc"})," \u7279\u6027\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:'not(feature = "std")'})," \u68c0\u67e5\u662f\u5426\u6ca1\u6709\u542f\u7528 ",(0,s.jsx)(e.code,{children:"std"})," \u7279\u6027\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:["\u5982\u679c\u8fd9\u4e24\u4e2a\u6761\u4ef6\u90fd\u6ee1\u8db3\uff0c\u90a3\u4e48 ",(0,s.jsx)(e.code,{children:"Cow"})," \u548c ",(0,s.jsx)(e.code,{children:"ToOwned"})," \u7c7b\u578b\u5c06\u4ece ",(0,s.jsx)(e.code,{children:"alloc::borrow"})," \u6a21\u5757\u4e2d\u91cd\u65b0\u5bfc\u51fa\uff08pub use\uff09\uff0c\u4f7f\u5f97\u5b83\u4eec\u53ef\u4ee5\u5728\u5f53\u524d\u6a21\u5757\u4e2d\u76f4\u63a5\u4f7f\u7528\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:'#[cfg(feature = "std")] pub use std::borrow::{Cow, ToOwned};'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u8fd9\u884c\u4ee3\u7801\u540c\u6837\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"cfg"})," \u5c5e\u6027\u5b8f\u8fdb\u884c\u6761\u4ef6\u7f16\u8bd1\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:'feature = "std"'})," \u68c0\u67e5\u662f\u5426\u542f\u7528\u4e86 ",(0,s.jsx)(e.code,{children:"std"})," \u7279\u6027\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:["\u5982\u679c\u542f\u7528\u4e86 ",(0,s.jsx)(e.code,{children:"std"})," \u7279\u6027\uff0c\u90a3\u4e48 ",(0,s.jsx)(e.code,{children:"Cow"})," \u548c ",(0,s.jsx)(e.code,{children:"ToOwned"})," \u7c7b\u578b\u5c06\u4ece ",(0,s.jsx)(e.code,{children:"std::borrow"})," \u6a21\u5757\u4e2d\u91cd\u65b0\u5bfc\u51fa\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["\u8fd9\u4e24\u6bb5\u4ee3\u7801\u7684\u76ee\u7684\u662f\u5141\u8bb8\u5f00\u53d1\u8005\u6839\u636e\u662f\u5426\u542f\u7528\u4e86 ",(0,s.jsx)(e.code,{children:"std"})," \u7279\u6027\u6765\u51b3\u5b9a\u4f7f\u7528\u6807\u51c6\u5e93\u7684 ",(0,s.jsx)(e.code,{children:"Cow"})," \u548c ",(0,s.jsx)(e.code,{children:"ToOwned"})," \u7c7b\u578b\uff0c\u8fd8\u662f\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"alloc"})," crate \u63d0\u4f9b\u7684\u7248\u672c\u3002",(0,s.jsx)(e.code,{children:"Cow"}),"\uff08Copy on Write\uff09\u662f\u4e00\u79cd\u667a\u80fd\u6307\u9488\uff0c\u7528\u4e8e\u4f18\u5316\u5185\u5b58\u4f7f\u7528\uff0c\u800c ",(0,s.jsx)(e.code,{children:"ToOwned"})," \u662f\u4e00\u4e2a trait\uff0c\u7528\u4e8e\u521b\u5efa\u4e00\u4e2a\u7c7b\u578b\u7684\u6240\u6709\u6743\u526f\u672c\u3002"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u5982\u679c\u6ca1\u6709\u542f\u7528 ",(0,s.jsx)(e.code,{children:"std"})," \u7279\u6027\uff0c\u4f46\u542f\u7528\u4e86 ",(0,s.jsx)(e.code,{children:"alloc"})," \u7279\u6027\uff0c\u90a3\u4e48\u4ee3\u7801\u5c06\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"alloc"})," crate \u4e2d\u7684\u7c7b\u578b\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:["\u5982\u679c\u542f\u7528\u4e86 ",(0,s.jsx)(e.code,{children:"std"})," \u7279\u6027\uff0c\u90a3\u4e48\u4ee3\u7801\u5c06\u4f7f\u7528\u6807\u51c6\u5e93\u4e2d\u7684\u7c7b\u578b\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["\u8fd9\u79cd\u6761\u4ef6\u7f16\u8bd1\u7684\u65b9\u5f0f\u4f7f\u5f97\u5e93\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u73af\u5883\u4e0b\u7075\u6d3b\u4f7f\u7528\uff0c\u4f8b\u5982\u5728\u5d4c\u5165\u5f0f\u7cfb\u7edf\u6216 WebAssembly \u4e2d\uff0c\u53ef\u80fd\u4e0d\u4f7f\u7528\u6807\u51c6\u5e93\uff0c\u800c\u662f\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"alloc"})," crate \u6765\u63d0\u4f9b\u5185\u5b58\u5206\u914d\u529f\u80fd\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:'#[cfg(any(\r\n   windows,\r\n   target_os = "linux",\r\n   target_os = "dragonfly",\r\n   target_os = "freebsd",\r\n   target_os = "netbsd",\r\n   target_os = "openbsd",\r\n   target_os = "macos",\r\n))]\n'})}),"\n",(0,s.jsx)(e.h2,{id:"deprecated",children:"#![deprecated]"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:"#[deprecated(\r\n   note = \"The 'core' module is being renamed to 'base' to avoid conflicts with the 'core' crate.\"\r\n)]\n"})}),"\n",(0,s.jsx)(e.h2,{id:"macro",children:"#[macro]"}),"\n",(0,s.jsx)(e.h3,{id:"macro_use",children:"#[macro_use]"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"#[macro_use]"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8fd9\u662f\u4e00\u4e2a\u5c5e\u6027\u5b8f\uff0c\u7528\u4e8e\u6307\u5b9a\u6a21\u5757\u4e2d\u7684\u5b8f\uff08macros\uff09\u5e94\u8be5\u5728\u5f53\u524d\u4f5c\u7528\u57df\u4e2d\u53ef\u7528\u3002"}),"\n",(0,s.jsxs)(e.li,{children:["\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"#[macro_use]"})," \u5c5e\u6027\u5b8f\uff0c\u53ef\u4ee5\u4f7f\u5f97\u6a21\u5757\u5185\u7684\u5b8f\u88ab\u81ea\u52a8\u5bfc\u5165\u5230\u5f53\u524d\u4f5c\u7528\u57df\u4e2d\uff0c\u800c\u4e0d\u9700\u8981\u663e\u5f0f\u5730\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"use"})," \u8bed\u53e5\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"mod macros;"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u8fd9\u662f\u4e00\u4e2a\u6a21\u5757\u58f0\u660e\uff0c\u5b83\u544a\u8bc9 Rust \u7f16\u8bd1\u5668\u6709\u4e00\u4e2a\u540d\u4e3a ",(0,s.jsx)(e.code,{children:"macros"})," \u7684\u6a21\u5757\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"macros"})," \u6a21\u5757\u53ef\u80fd\u5305\u542b\u5b8f\u5b9a\u4e49\uff0c\u8fd9\u4e9b\u5b8f\u5b9a\u4e49\u5728\u6a21\u5757\u5185\u90e8\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u7efc\u5408\u6765\u770b\uff0c\u8fd9\u884c\u4ee3\u7801\u7684\u4f5c\u7528\u662f\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u58f0\u660e\u4e00\u4e2a\u540d\u4e3a ",(0,s.jsx)(e.code,{children:"macros"})," \u7684\u6a21\u5757\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:["\u901a\u8fc7 ",(0,s.jsx)(e.code,{children:"#[macro_use]"})," \u5c5e\u6027\u5b8f\uff0c\u5c06 ",(0,s.jsx)(e.code,{children:"macros"})," \u6a21\u5757\u4e2d\u7684\u5b8f\u81ea\u52a8\u5bfc\u5165\u5230\u5f53\u524d\u4f5c\u7528\u57df\u4e2d\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["\u8fd9\u6837\uff0c\u4f60\u5c31\u53ef\u4ee5\u5728\u5f53\u524d\u4f5c\u7528\u57df\u4e2d\u76f4\u63a5\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"macros"})," \u6a21\u5757\u4e2d\u5b9a\u4e49\u7684\u5b8f\u4e86\u3002"]}),"\n",(0,s.jsx)(e.h4,{id:"\u793a\u4f8b-1",children:"\u793a\u4f8b"}),"\n",(0,s.jsx)(e.p,{children:"\u5047\u8bbe\u4f60\u6709\u4ee5\u4e0b\u4ee3\u7801\u7ed3\u6784\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:"// \u5728 lib.rs \u6216 main.rs \u4e2d\r\n#[macro_use]\r\nmod macros;\r\n\r\nfn main() {\r\n    my_macro!();\r\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"#[macro_use]"})," \u5c5e\u6027\u5b8f\u4f7f\u5f97 ",(0,s.jsx)(e.code,{children:"macros"})," \u6a21\u5757\u4e2d\u7684\u5b8f\u81ea\u52a8\u5bfc\u5165\u5230\u5f53\u524d\u4f5c\u7528\u57df\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"mod macros;"})," \u58f0\u660e\u4e86\u4e00\u4e2a\u540d\u4e3a ",(0,s.jsx)(e.code,{children:"macros"})," \u7684\u6a21\u5757\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:["\u5728 ",(0,s.jsx)(e.code,{children:"main"})," \u51fd\u6570\u4e2d\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"my_macro!()"})," \u5b8f\uff0c\u800c\u4e0d\u9700\u8981\u663e\u5f0f\u5730\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"use"})," \u8bed\u53e5\u3002"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\u7b80\u5316\u4e86\u5b8f\u7684\u5bfc\u5165\u8fc7\u7a0b\uff0c\u4f7f\u5f97\u4ee3\u7801\u66f4\u52a0\u7b80\u6d01\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"macro_export",children:"#[macro_export]"}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u4e9b\u5c5e\u6027\u5b8f\u7528\u4e8e\u63a7\u5236 Rust \u5b8f\u7684\u5bfc\u51fa\u884c\u4e3a\u548c\u6587\u6863\u7684\u53ef\u89c1\u6027\u3002\u4e0b\u9762\u662f\u6bcf\u884c\u4ee3\u7801\u7684\u4f5c\u7528\uff1a"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"#[macro_export(local_inner_macros)]"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8fd9\u662f\u4e00\u4e2a\u5c5e\u6027\u5b8f\uff0c\u7528\u4e8e\u5bfc\u51fa\u5b8f\u5b9a\u4e49\uff0c\u4f7f\u5176\u5728\u5176\u4ed6 crate \u4e2d\u53ef\u7528\u3002"}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"local_inner_macros"})," \u662f ",(0,s.jsx)(e.code,{children:"macro_export"})," \u5c5e\u6027\u7684\u4e00\u4e2a\u9009\u9879\uff0c\u5b83\u5141\u8bb8\u5b8f\u5728\u5bfc\u51fa\u65f6\u80fd\u591f\u8bbf\u95ee\u5f53\u524d\u6a21\u5757\u4e2d\u7684\u5185\u90e8\u5b8f\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"#[macro_export]"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u8fd9\u662f\u53e6\u4e00\u4e2a ",(0,s.jsx)(e.code,{children:"macro_export"})," \u5c5e\u6027\u5b8f\uff0c\u540c\u6837\u7528\u4e8e\u5bfc\u51fa\u5b8f\u5b9a\u4e49\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"#[macro_export(local_inner_macros)]"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8fd9\u884c\u4ee3\u7801\u4e0e\u7b2c\u4e00\u884c\u76f8\u540c\uff0c\u518d\u6b21\u5f3a\u8c03\u4e86\u5b8f\u7684\u5bfc\u51fa\u884c\u4e3a\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"\u793a\u4f8b-2",children:"\u793a\u4f8b"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:'#[macro_export]\r\nmacro_rules! my_macro {\r\n    () => {\r\n        println!("Hello from macro!");\r\n    };\r\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u5047\u8bbe\u4f60\u6709\u4ee5\u4e0b\u5b8f\u5b9a\u4e49\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:'// \u5728 lib.rs \u6216 main.rs \u4e2d\r\n#[macro_export(local_inner_macros)]\r\n#[doc(hidden)]\r\nmacro_rules! my_macro {\r\n    () => {\r\n        println!("Hello from macro!");\r\n    };\r\n}\r\n\r\n#[macro_export]\r\n#[macro_export(local_inner_macros)]\r\nmacro_rules! another_macro {\r\n    () => {\r\n        println!("Hello from another macro!");\r\n    };\r\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"my_macro!"})," \u5b8f\u88ab\u5bfc\u51fa\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u5176\u4ed6 crate \u4e2d\u4f7f\u7528\u3002\u540c\u65f6\uff0c\u5b83\u88ab\u6807\u8bb0\u4e3a\u9690\u85cf\uff0c\u4e0d\u4f1a\u51fa\u73b0\u5728\u751f\u6210\u7684\u6587\u6863\u4e2d\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"another_macro!"})," \u5b8f\u4e5f\u88ab\u5bfc\u51fa\uff0c\u5e76\u4e14\u53ef\u4ee5\u8bbf\u95ee\u5f53\u524d\u6a21\u5757\u4e2d\u7684\u5185\u90e8\u5b8f\u3002"]}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"\u6ce8\u610f\u4e8b\u9879",children:"\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"#[macro_export(local_inner_macros)]"})," \u5c5e\u6027\u5b8f\u7684\u4f7f\u7528\u9700\u8981 Rust 1.56 \u7248\u672c\u6216\u66f4\u9ad8\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:["\u5982\u679c\u4f60\u591a\u6b21\u4f7f\u7528\u76f8\u540c\u7684\u5c5e\u6027\u5b8f\uff0c\u53ea\u6709\u6700\u540e\u4e00\u6b21\u4f1a\u751f\u6548\u3002\u6240\u4ee5\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c",(0,s.jsx)(e.code,{children:"another_macro!"})," \u7684 ",(0,s.jsx)(e.code,{children:"#[macro_export]"})," \u5c5e\u6027\u5b8f\u662f\u591a\u4f59\u7684\uff0c\u56e0\u4e3a\u540e\u9762\u7684 ",(0,s.jsx)(e.code,{children:"#[macro_export(local_inner_macros)]"})," \u5df2\u7ecf\u8986\u76d6\u4e86\u5b83\u3002"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u4e9b\u5c5e\u6027\u5b8f\u7684\u4f7f\u7528\u53ef\u4ee5\u5e2e\u52a9\u4f60\u66f4\u597d\u5730\u63a7\u5236\u5b8f\u7684\u53ef\u89c1\u6027\u548c\u5bfc\u51fa\u884c\u4e3a\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"built-in",children:"Built-in"}),"\n",(0,s.jsx)(e.h3,{id:"allow--warn--deny",children:"#[allow()] / #[warn()] / #![deny()]"}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u662f\u4e00\u7ec4\u5171\u8f6d\u5c5e\u6027\u5b8f\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"#[allow(dead_code)]"}),", \u5141\u8bb8\u6ca1\u6709\u4f7f\u7528\u7684\u4ee3\u7801"]}),"\n",(0,s.jsx)(e.li,{children:"unused_variables"}),"\n",(0,s.jsx)(e.li,{children:"unused_macros"}),"\n"]}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"#![deny(clippy::question_mark_used)]"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u8fd9\u884c\u4ee3\u7801\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"deny"})," \u5c5e\u6027\u5b8f\u6765\u7981\u6b62\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"clippy::question_mark_used"})," lint\u3002Clippy \u662f Rust \u7684\u4e00\u4e2a\u4ee3\u7801\u68c0\u67e5\u5de5\u5177\uff0c\u5b83\u5e2e\u52a9\u5f00\u53d1\u8005\u5199\u51fa\u66f4\u7b26\u5408 Rust \u793e\u533a\u4e60\u60ef\u7684\u4ee3\u7801\u3002",(0,s.jsx)(e.code,{children:"clippy::question_mark_used"})," lint \u68c0\u67e5\u4ee3\u7801\u4e2d\u662f\u5426\u4f7f\u7528\u4e86 ",(0,s.jsx)(e.code,{children:"?"})," \u64cd\u4f5c\u7b26\u3002",(0,s.jsx)(e.code,{children:"?"})," \u64cd\u4f5c\u7b26\u7528\u4e8e\u9519\u8bef\u4f20\u64ad\uff0c\u5982\u679c\u4e00\u4e2a\u51fd\u6570\u8fd4\u56de ",(0,s.jsx)(e.code,{children:"Result"})," \u6216 ",(0,s.jsx)(e.code,{children:"Option"})," \u7c7b\u578b\uff0c\u5e76\u4e14\u8c03\u7528\u65b9\u60f3\u8981\u7acb\u5373\u5904\u7406\u9519\u8bef\uff0c\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"?"})," \u6765\u7b80\u5316\u4ee3\u7801\u3002\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"deny"})," \u5c5e\u6027\u5b8f\u7981\u6b62\u8fd9\u4e2a lint \u610f\u5473\u7740\u5982\u679c\u4ee3\u7801\u4e2d\u4f7f\u7528\u4e86 ",(0,s.jsx)(e.code,{children:"?"})," \u64cd\u4f5c\u7b26\uff0c\u7f16\u8bd1\u5c06\u4f1a\u5931\u8d25\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"#![deny(missing_docs, unused_imports)]"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u8fd9\u884c\u4ee3\u7801\u540c\u6837\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"deny"})," \u5c5e\u6027\u5b8f\u6765\u7981\u6b62\u4e24\u4e2a\u7279\u5b9a\u7684 lint\uff1a",(0,s.jsx)(e.code,{children:"missing_docs"})," \u548c ",(0,s.jsx)(e.code,{children:"unused_imports"}),"\u3002\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"missing_docs"})," lint \u68c0\u67e5\u4ee3\u7801\u662f\u5426\u7f3a\u5c11\u6587\u6863\u6ce8\u91ca\u3002Rust \u793e\u533a\u9f13\u52b1\u4e3a\u516c\u5171 API \u63d0\u4f9b\u6587\u6863\uff0c\u8fd9\u4e2a lint \u786e\u4fdd\u6240\u6709\u7684\u516c\u5171\u51fd\u6570\u3001\u7ed3\u6784\u4f53\u3001\u679a\u4e3e\u7b49\u90fd\u6709\u6587\u6863\u6ce8\u91ca\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"unused_imports"})," lint \u68c0\u67e5\u4ee3\u7801\u4e2d\u662f\u5426\u6709\u672a\u4f7f\u7528\u7684\u5bfc\u5165\uff08imports\uff09\u3002\u672a\u4f7f\u7528\u7684\u5bfc\u5165\u53ef\u80fd\u4f1a\u4f7f\u4ee3\u7801\u53d8\u5f97\u6df7\u4e71\uff0c\u5e76\u4e14\u53ef\u80fd\u4f1a\u5f15\u5165\u4e0d\u5fc5\u8981\u7684\u4f9d\u8d56\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:"#![deny(\r\n   missing_docs,\r\n   nonstandard_style,\r\n   unused_variables,\r\n   unused_mut,\r\n   unused_parens,\r\n   rust_2018_idioms,\r\n   rust_2018_compatibility,\r\n   future_incompatible,\r\n   missing_copy_implementations\r\n)]\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u8fd9\u6bb5\u4ee3\u7801\u662f Rust \u8bed\u8a00\u7684\u5c5e\u6027\u5b8f ",(0,s.jsx)(e.code,{children:"#![deny(...)]"})," \u7684\u4e00\u4e2a\u5e94\u7528\uff0c\u5b83\u7528\u4e8e\u6307\u5b9a\u4e00\u7ec4\u7f16\u8bd1\u65f6\u7684 lint \u68c0\u67e5\u89c4\u5219\u3002\u8fd9\u4e9b\u89c4\u5219\u4f1a\u4f7f\u5f97\u7f16\u8bd1\u5668\u5728\u7f16\u8bd1\u65f6\u5bf9\u4ee3\u7801\u8fdb\u884c\u68c0\u67e5\uff0c\u5982\u679c\u4ee3\u7801\u8fdd\u53cd\u4e86\u8fd9\u4e9b\u89c4\u5219\uff0c\u7f16\u8bd1\u5668\u5c06\u4f1a\u62a5\u9519\u3002\u4e0b\u9762\u662f\u6bcf\u4e2a\u89c4\u5219\u7684\u89e3\u91ca\uff1a"]}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:(0,s.jsx)(e.code,{children:"missing_docs"})}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u68c0\u67e5\u516c\u5171\u63a5\u53e3\u662f\u5426\u7f3a\u5c11\u6587\u6863\u6ce8\u91ca\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:(0,s.jsx)(e.code,{children:"nonstandard_style"})}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u68c0\u67e5\u4ee3\u7801\u662f\u5426\u9075\u5b88 Rust \u793e\u533a\u7684\u547d\u540d\u548c\u6837\u5f0f\u7ea6\u5b9a\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:(0,s.jsx)(e.code,{children:"unused_variables"})}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u68c0\u67e5\u662f\u5426\u6709\u58f0\u660e\u4e86\u4f46\u6ca1\u6709\u4f7f\u7528\u7684\u53d8\u91cf\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:(0,s.jsx)(e.code,{children:"unused_mut"})}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u68c0\u67e5\u662f\u5426\u6709\u58f0\u660e\u4e3a ",(0,s.jsx)(e.code,{children:"mut"}),"\uff08\u53ef\u53d8\uff09\u4f46\u5b9e\u9645\u4e0a\u6ca1\u6709\u88ab\u4fee\u6539\u7684\u53d8\u91cf\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:(0,s.jsx)(e.code,{children:"unused_parens"})}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u68c0\u67e5\u662f\u5426\u6709\u4e0d\u5fc5\u8981\u7684\u62ec\u53f7\uff0c\u8fd9\u4e9b\u62ec\u53f7\u4e0d\u4f1a\u5f71\u54cd\u4ee3\u7801\u7684\u884c\u4e3a\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:(0,s.jsx)(e.code,{children:"rust_2018_idioms"})}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u68c0\u67e5\u4ee3\u7801\u662f\u5426\u4f7f\u7528\u4e86 Rust 2018 edition \u7684\u60ef\u7528\u6a21\u5f0f\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:(0,s.jsx)(e.code,{children:"rust_2018_compatibility"})}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u68c0\u67e5\u4ee3\u7801\u662f\u5426\u4e0e Rust 2018 \u7248\u517c\u5bb9\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:(0,s.jsx)(e.code,{children:"future_incompatible"})}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u68c0\u67e5\u4ee3\u7801\u4e2d\u662f\u5426\u5b58\u5728\u53ef\u80fd\u5728\u672a\u6765\u7248\u672c\u7684 Rust \u4e2d\u53d8\u5f97\u4e0d\u517c\u5bb9\u7684\u7528\u6cd5\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:(0,s.jsx)(e.code,{children:"missing_copy_implementations"})}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u68c0\u67e5\u662f\u5426\u7f3a\u5c11\u5bf9 ",(0,s.jsx)(e.code,{children:"Copy"})," trait \u7684\u5b9e\u73b0\u3002\u8fd9\u901a\u5e38\u7528\u4e8e\u63d0\u9192\u5f00\u53d1\u8005\u4e3a\u7b80\u5355\u7684\u6570\u636e\u7c7b\u578b\u5b9e\u73b0 ",(0,s.jsx)(e.code,{children:"Copy"})," trait\uff0c\u4ee5\u4fbf\u5b83\u4eec\u53ef\u4ee5\u88ab\u9690\u5f0f\u590d\u5236\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u4e9b\u89c4\u5219\u7684\u76ee\u7684\u662f\u5e2e\u52a9\u5f00\u53d1\u8005\u7f16\u5199\u66f4\u9ad8\u8d28\u91cf\u3001\u66f4\u4e00\u81f4\u3001\u66f4\u6613\u4e8e\u7ef4\u62a4\u7684\u4ee3\u7801\u3002\u901a\u8fc7\u5728\u7f16\u8bd1\u65f6\u5f3a\u5236\u6267\u884c\u8fd9\u4e9b\u89c4\u5219\uff0c\u53ef\u4ee5\u51cf\u5c11\u6f5c\u5728\u7684\u9519\u8bef\u548c\u4e0d\u4e00\u81f4\u6027\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5047\u8bbe\u4f60\u6709\u4e00\u4e2a Rust \u6e90\u6587\u4ef6\uff0c\u5176\u4e2d\u5305\u542b\u4ee5\u4e0b\u4ee3\u7801\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:"/// This function does nothing.\r\nfn do_nothing() {\r\n    let _unused_variable = 42; // \u8fdd\u53cd\u4e86 unused_variables\r\n}\r\n\r\nfn main() {\r\n    let mut mutable_variable = 1; // \u8fdd\u53cd\u4e86 unused_mut\r\n}\r\n\r\nfn add(a: i32, b: i32) {\r\n    let result = (a + b); // \u8fdd\u53cd\u4e86 unused_parens\r\n}\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u5982\u679c\u4f60\u5728 ",(0,s.jsx)(e.code,{children:"#![deny(...)]"})," \u4e2d\u5305\u542b\u4e86\u8fd9\u4e9b\u89c4\u5219\uff0c\u7f16\u8bd1\u5668\u5c06\u4f1a\u62a5\u9519\uff0c\u6307\u51fa ",(0,s.jsx)(e.code,{children:"_unused_variable"}),"\u3001",(0,s.jsx)(e.code,{children:"mutable_variable"})," \u548c\u591a\u4f59\u7684\u62ec\u53f7\u8fdd\u53cd\u4e86\u76f8\u5e94\u7684\u89c4\u5219\u3002"]}),"\n",(0,s.jsxs)(e.p,{children:["\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"#![deny(...)]"})," \u5c5e\u6027\u5b8f\u53ef\u4ee5\u63d0\u9ad8\u4ee3\u7801\u8d28\u91cf\uff0c\u786e\u4fdd\u4ee3\u7801\u9075\u5faa Rust \u793e\u533a\u7684\u6700\u4f73\u5b9e\u8df5\u548c\u7ea6\u5b9a\u3002\u8fd9\u4e9b\u89c4\u5219\u6709\u52a9\u4e8e\u907f\u514d\u5e38\u89c1\u7684\u7f16\u7a0b\u9519\u8bef\u548c\u4e0d\u4e00\u81f4\u6027\uff0c\u4f7f\u5f97\u4ee3\u7801\u66f4\u52a0\u5065\u58ee\u548c\u53ef\u9760\u3002"]}),"\n",(0,s.jsx)(e.h3,{id:"inline",children:"#[inline]"}),"\n",(0,s.jsxs)(e.p,{children:["\u5728 Rust \u8bed\u8a00\u4e2d\uff0c",(0,s.jsx)(e.code,{children:"#[inline]"})," \u662f\u4e00\u4e2a\u5c5e\u6027\u5b8f\uff0c\u7528\u4e8e\u5411\u7f16\u8bd1\u5668\u63d0\u4f9b\u5185\u8054\u51fd\u6570\u7684\u63d0\u793a\u3002\u5185\u8054\u51fd\u6570\u662f\u4e00\u79cd\u4f18\u5316\u624b\u6bb5\uff0c\u5b83\u5efa\u8bae\u7f16\u8bd1\u5668\u5728\u6bcf\u6b21\u8c03\u7528\u51fd\u6570\u65f6\u5c06\u51fd\u6570\u7684\u4ee3\u7801\u76f4\u63a5\u63d2\u5165\u5230\u8c03\u7528\u70b9\uff0c\u800c\u4e0d\u662f\u8fdb\u884c\u5e38\u89c4\u7684\u51fd\u6570\u8c03\u7528\u3002\u8fd9\u6837\u505a\u53ef\u4ee5\u51cf\u5c11\u51fd\u6570\u8c03\u7528\u7684\u5f00\u9500\uff0c\u7279\u522b\u662f\u5bf9\u4e8e\u5c0f\u578b\u51fd\u6570\u6765\u8bf4\uff0c\u53ef\u4ee5\u63d0\u9ad8\u7a0b\u5e8f\u7684\u6267\u884c\u6548\u7387\u3002\u4e0d\u8fc7\uff0c\u7f16\u8bd1\u5668\u5e76\u4e0d\u4fdd\u8bc1\u4e00\u5b9a\u4f1a\u6309\u7167\u8fd9\u4e2a\u63d0\u793a\u8fdb\u884c\u5185\u8054\uff0c\u6700\u7ec8\u662f\u5426\u5185\u8054\u7531\u7f16\u8bd1\u5668\u7684\u4f18\u5316\u7b56\u7565\u51b3\u5b9a\u3002"]}),"\n",(0,s.jsx)(e.h4,{id:"\u4f7f\u7528\u573a\u666f",children:"\u4f7f\u7528\u573a\u666f"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u5c0f\u578b\u51fd\u6570"}),"\uff1a\u5bf9\u4e8e\u53ea\u6709\u51e0\u884c\u4ee3\u7801\u7684\u5c0f\u578b\u51fd\u6570\uff0c\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"#[inline]"})," \u53ef\u4ee5\u51cf\u5c11\u51fd\u6570\u8c03\u7528\u7684\u5f00\u9500\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u9012\u5f52\u51fd\u6570"}),"\uff1a\u5bf9\u4e8e\u9012\u5f52\u51fd\u6570\uff0c\u5185\u8054\u53ef\u4ee5\u907f\u514d\u9012\u5f52\u8c03\u7528\u7684\u5f00\u9500\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u6027\u80fd\u5173\u952e\u8def\u5f84"}),"\uff1a\u5728\u6027\u80fd\u654f\u611f\u7684\u4ee3\u7801\u8def\u5f84\u4e0a\uff0c\u5185\u8054\u53ef\u4ee5\u51cf\u5c11\u51fd\u6570\u8c03\u7528\u7684\u5ef6\u8fdf\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"\u793a\u4f8b-3",children:"\u793a\u4f8b"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:'#[inline]\r\nfn add(a: i32, b: i32) -> i32 {\r\n    a + b\r\n}\r\n\r\nfn main() {\r\n    let result = add(2, 3);\r\n    println!("The result is: {}", result);\r\n}\n'})}),"\n",(0,s.jsxs)(e.p,{children:["\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c",(0,s.jsx)(e.code,{children:"add"})," \u51fd\u6570\u88ab\u6807\u8bb0\u4e3a ",(0,s.jsx)(e.code,{children:"#[inline]"}),"\uff0c\u5efa\u8bae\u7f16\u8bd1\u5668\u5728\u6bcf\u6b21\u8c03\u7528 ",(0,s.jsx)(e.code,{children:"add"})," \u65f6\u5c06\u5176\u5185\u8054\u3002"]}),"\n",(0,s.jsx)(e.h4,{id:"\u6ce8\u610f\u4e8b\u9879-1",children:"\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u6ee5\u7528\u5185\u8054"}),"\uff1a\u8fc7\u5ea6\u4f7f\u7528\u5185\u8054\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4ee3\u7801\u81a8\u80c0\uff0c\u589e\u52a0\u7f16\u8bd1\u65f6\u95f4\uff0c\u751a\u81f3\u53ef\u80fd\u964d\u4f4e\u6027\u80fd\uff0c\u56e0\u4e3a\u7f16\u8bd1\u5668\u53ef\u80fd\u65e0\u6cd5\u4f18\u5316\u5927\u5757\u7684\u5185\u8054\u4ee3\u7801\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u7f16\u8bd1\u5668\u7684\u51b3\u7b56"}),"\uff1a\u5373\u4f7f\u4f7f\u7528\u4e86 ",(0,s.jsx)(e.code,{children:"#[inline]"}),"\uff0c\u7f16\u8bd1\u5668\u4e5f\u53ef\u80fd\u56e0\u4e3a\u5404\u79cd\u539f\u56e0\uff08\u5982\u4ee3\u7801\u5927\u5c0f\u3001\u8c03\u7528\u9891\u7387\u7b49\uff09\u800c\u9009\u62e9\u4e0d\u8fdb\u884c\u5185\u8054\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u8de8\u6a21\u5757\u5185\u8054"}),"\uff1a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u53ea\u80fd\u5728\u5b9a\u4e49\u51fd\u6570\u7684\u6a21\u5757\u5185\u8fdb\u884c\u5185\u8054\u3002\u5982\u679c\u9700\u8981\u8de8\u6a21\u5757\u5185\u8054\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"#[inline(always)]"})," \u5f3a\u5236\u7f16\u8bd1\u5668\u8fdb\u884c\u5185\u8054\uff0c\u4f46\u8fd9\u901a\u5e38\u4e0d\u63a8\u8350\uff0c\u56e0\u4e3a\u5b83\u4f1a\u4f7f\u5f97\u4ee3\u7801\u66f4\u96be\u7ef4\u62a4\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"path",children:"#[path]"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:'// Used by generated code and doc tests. Not public API.\r\n#[doc(hidden)]\r\n#[path = "private/mod.rs"]\r\npub mod __private;\r\n\r\n#[path = "de/seed.rs"]\r\nmod seed;\n'})}),"\n",(0,s.jsx)(e.h3,{id:"must_use",children:"#[must_use]"}),"\n",(0,s.jsx)(e.p,{children:"\u4e24\u79cd\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:'#[must_use] \r\n#[must_use = "Did you mean to use inverse_mut()?"]\n'})}),"\n",(0,s.jsx)(e.h3,{id:"non_exhaustive",children:"#[non_exhaustive]"}),"\n",(0,s.jsxs)(e.p,{children:["\u5728 Rust \u4e2d\uff0c",(0,s.jsx)(e.code,{children:"#[non_exhaustive]"})," \u662f\u4e00\u4e2a\u5c5e\u6027\uff0c\u7528\u4e8e\u6307\u793a\u4e00\u4e2a\u7c7b\u578b\uff08\u901a\u5e38\u662f\u679a\u4e3e\u6216\u7ed3\u6784\u4f53\uff09\u7684\u5b9a\u4e49\u662f\u4e0d\u5b8c\u6574\u7684\uff0c\u5e76\u4e14\u672a\u6765\u53ef\u80fd\u4f1a\u6dfb\u52a0\u66f4\u591a\u7684\u53d8\u4f53\u6216\u5b57\u6bb5\uff0c\u800c\u4e0d\u4f1a\u7834\u574f\u4e8c\u8fdb\u5236\u517c\u5bb9\u6027\u3002\u8fd9\u4e2a\u5c5e\u6027\u8868\u660e\u7c7b\u578b\u662f\u201c\u975e\u7a77\u5c3d\u7684\u201d\uff08non-exhaustive\uff09\uff0c\u610f\u5473\u7740\u4f60\u4e0d\u80fd\u5b89\u5168\u5730\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"match"})," \u8bed\u53e5\u6216\u6a21\u5f0f\u5339\u914d\u6765\u8986\u76d6\u6240\u6709\u7684\u60c5\u51b5\u3002",(0,s.jsx)(e.code,{children:"#[non_exhaustive]"})," \u5c5e\u6027\u662f\u5728 Rust 1.53 \u7248\u672c\u4e2d\u7a33\u5b9a\u4e0b\u6765\u7684\uff0c\u6240\u4ee5\u9700\u8981\u81f3\u5c11\u8fd9\u4e2a\u7248\u672c\u7684 Rust \u6765\u4f7f\u7528\u5b83\u3002"]}),"\n",(0,s.jsx)(e.h4,{id:"\u4f5c\u7528",children:"\u4f5c\u7528"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u9632\u6b62\u7a77\u5c3d\u6027\u68c0\u67e5"}),"\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u5f53\u4f60\u5728\u4e00\u4e2a\u7ed3\u6784\u4f53\u6216\u679a\u4e3e\u4e0a\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"#[non_exhaustive]"})," \u5c5e\u6027\u65f6\uff0c\u7f16\u8bd1\u5668\u4f1a\u963b\u6b62\u4f60\u8fdb\u884c\u7a77\u5c3d\u6027\u68c0\u67e5\u3002\u7a77\u5c3d\u6027\u68c0\u67e5\u662f\u6307\u7f16\u8bd1\u5668\u786e\u4fdd\u4f60\u7684 ",(0,s.jsx)(e.code,{children:"match"})," \u8bed\u53e5\u8986\u76d6\u4e86\u6240\u6709\u53ef\u80fd\u7684\u679a\u4e3e\u53d8\u4f53\u6216\u7ed3\u6784\u4f53\u5b57\u6bb5\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u672a\u6765\u517c\u5bb9\u6027"}),"\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u5982\u679c\u4f60\u6b63\u5728\u8bbe\u8ba1\u4e00\u4e2a\u5e93\uff0c\u5e76\u4e14\u4f60\u5e0c\u671b\u5728\u672a\u6765\u6dfb\u52a0\u66f4\u591a\u7684\u53d8\u4f53\u6216\u5b57\u6bb5\uff0c\u4f46\u4e0d\u60f3\u8ba9\u8fd9\u79cd\u6dfb\u52a0\u5f71\u54cd\u73b0\u6709\u7528\u6237\u7684\u4ee3\u7801\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"#[non_exhaustive]"})," \u5c5e\u6027\u3002\u8fd9\u53ef\u4ee5\u786e\u4fdd\u4f60\u7684\u5e93\u7684\u7528\u6237\u4e0d\u4f1a\u5199\u4f9d\u8d56\u4e8e\u7c7b\u578b\u5b8c\u5168\u7a77\u5c3d\u7684\u4ee3\u7801\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u4fdd\u62a4\u6a21\u5f0f\u5339\u914d"}),"\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"#[non_exhaustive]"})," \u53ef\u4ee5\u9632\u6b62\u7528\u6237\u5047\u8bbe\u4ed6\u4eec\u5df2\u7ecf\u8986\u76d6\u4e86\u6240\u6709\u7684\u60c5\u51b5\uff0c\u4ece\u800c\u907f\u514d\u672a\u6765\u6dfb\u52a0\u65b0\u53d8\u4f53\u6216\u5b57\u6bb5\u65f6\u53ef\u80fd\u5f15\u5165\u7684\u9519\u8bef\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:"#[non_exhaustive]\r\nenum Message {\r\n    Quit,\r\n    Move { x: i32, y: i32 },\r\n    Write(String),\r\n}\r\n\r\n// \u4e0b\u9762\u7684\u4ee3\u7801\u5c06\u65e0\u6cd5\u7f16\u8bd1\uff0c\u56e0\u4e3a `Message` \u662f\u975e\u7a77\u5c3d\u7684\r\n//\r\n// fn handle_message(msg: Message) {\r\n//     match msg {\r\n//         Message::Quit => {},\r\n//         Message::Move { .. } => {},\r\n//         Message::Write(_) => {},\r\n//     }\r\n// }\n"})}),"\n",(0,s.jsx)(e.h3,{id:"repr",children:"#[repr]"}),"\n",(0,s.jsx)(e.h4,{id:"reprc",children:"#[repr(C)]"}),"\n",(0,s.jsxs)(e.p,{children:["\u5728 Rust \u4e2d\uff0c",(0,s.jsx)(e.code,{children:"#[repr(C)]"})," \u662f\u4e00\u4e2a\u5c5e\u6027\uff08attribute\uff09\u7528\u4e8e\u6307\u5b9a\u4e00\u4e2a\u7c7b\u578b\uff08\u5982\u7ed3\u6784\u4f53\u6216\u679a\u4e3e\uff09\u7684\u5185\u5b58\u5e03\u5c40\uff08representation\uff09\u3002",(0,s.jsx)(e.code,{children:"repr"}),' \u4ee3\u8868 "representation"\uff0c\u800c ',(0,s.jsx)(e.code,{children:"C"})," \u6307\u7684\u662f C \u8bed\u8a00\u7684\u5185\u5b58\u5e03\u5c40\u3002\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"#[repr(C)]"})," \u53ef\u4ee5\u786e\u4fdd Rust \u7c7b\u578b\u7684\u5185\u5b58\u5e03\u5c40\u4e0e C \u8bed\u8a00\u4e2d\u7684\u5e03\u5c40\u76f8\u5339\u914d\uff0c\u8fd9\u5bf9\u4e8e\u4e0e C \u8bed\u8a00\u5e93\u8fdb\u884c\u63a5\u53e3\uff08FFI - Foreign Function Interface\uff09\u64cd\u4f5c\u65f6\u975e\u5e38\u91cd\u8981\u3002"]}),"\n",(0,s.jsx)(e.h4,{id:"reprisize",children:"#[repr(isize)]"}),"\n",(0,s.jsx)(e.p,{children:'#[repr(isize)] \u662f\u4e00\u4e2a\u5c5e\u6027\uff08attribute\uff09\uff0c\u7528\u4e8e\u6307\u5b9a\u4e00\u4e2a\u7c7b\u578b\uff08\u901a\u5e38\u662f\u679a\u4e3e\u6216\u7ed3\u6784\u4f53\uff09\u7684\u5185\u5b58\u8868\u793a\u3002repr \u662f "representation" \u7684\u7f29\u5199\uff0c\u800c isize \u6307\u7684\u662f\u5e73\u53f0\u76f8\u5173\u7684\u6574\u578b\u5927\u5c0f\uff08\u4f8b\u5982\uff0c\u5728 32 \u4f4d\u7cfb\u7edf\u4e0a\u662f 32 \u4f4d\uff0c\u5728 64 \u4f4d\u7cfb\u7edf\u4e0a\u662f 64 \u4f4d\uff09\u3002\u4f7f\u7528 #[repr(isize)] \u53ef\u4ee5\u786e\u4fdd\u7c7b\u578b\u7684\u5185\u5b58\u5e03\u5c40\u7684\u5927\u5c0f\u4e0e\u5e73\u53f0\u7684 isize \u7c7b\u578b\u5927\u5c0f\u76f8\u540c\u3002'}),"\n",(0,s.jsx)(e.h4,{id:"repru8",children:"#[repr(u8)]"}),"\n",(0,s.jsx)(e.p,{children:"\u4fdd\u8bc1\u5728\u4efb\u4f55\u5e73\u53f0\u4e0a\u90fd\u6309\u7167 u8 \u7684\u5bf9\u9f50\u65b9\u5f0f\u8fdb\u884c\u5bf9\u9f50\u3002\u901a\u5e38\u53ea\u7528\u4e8e\u65e0\u5b57\u6bb5\u679a\u4e3e\u3002\u5bf9\u4e8e\u5305\u542b\u5b57\u6bb5\u7684\u679a\u4e3e\uff0c\u901a\u5e38\u4f7f\u7528 #[repr(C)] \u6765\u786e\u4fdd\u4e0e C \u8bed\u8a00\u7684\u517c\u5bb9\u6027\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"reprtransparent",children:"#[repr(transparent)]"}),"\n",(0,s.jsx)(e.p,{children:"\u7ecf\u5e38\u7528\u4e8e\u521b\u5efa\u4e0e C \u8bed\u8a00\u7ed3\u6784\u4f53\u6216\u8054\u5408\u4f53\uff08union\uff09\u5e03\u5c40\u76f8\u540c\u7684 Rust \u7c7b\u578b\u3002\u610f\u5473\u7740\u6574\u4e2a\u7c7b\u578b\u7684\u5e03\u5c40\u548c ABI\uff08\u5e94\u7528\u7a0b\u5e8f\u4e8c\u8fdb\u5236\u63a5\u53e3\uff09\u4e0e\u5176\u4e2d\u4e00\u4e2a\u5b57\u6bb5\u76f8\u540c\u3002"})]})}function x(n={}){const{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(t,{...n})}):t(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>i,x:()=>l});var s=r(6540);const d={},c=s.createContext(d);function i(n){const e=s.useContext(c);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(d):n.components||d:i(n.components),s.createElement(c.Provider,{value:e},n.children)}}}]);