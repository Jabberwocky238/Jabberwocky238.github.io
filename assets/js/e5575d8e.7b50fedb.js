"use strict";(self.webpackChunkjabberwocky238_github_io=self.webpackChunkjabberwocky238_github_io||[]).push([[5211],{19136:(n,r,e)=>{e.r(r),e.d(r,{assets:()=>i,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var t=e(74848),s=e(28453);const o={title:"trojan\u4f7f\u7528\u8bb0\u5f55",authors:["jabberwocky238"],tags:["zh","tech"]},a=void 0,l={permalink:"/blog/2024/11/01/trojan-gfw",source:"@site/blog/2024-11-01-trojan-gfw/index.md",title:"trojan\u4f7f\u7528\u8bb0\u5f55",description:"\u670d\u52a1\u7aef(linux)",date:"2024-11-01T00:00:00.000Z",tags:[{inline:!1,label:"zh",permalink:"/blog/tags/zh",description:"Blogs Written In Chinese"},{inline:!1,label:"tech",permalink:"/blog/tags/tech",description:"All technical blogs"}],readingTime:1.815,hasTruncateMarker:!0,authors:[{name:"jabberwocky238",title:"WTF",url:"https://github.com/jabberwocky238",page:null,socials:{github:"https://github.com/jabberwocky238"},imageURL:"/jw238_avatar.png",key:"jabberwocky238"}],frontMatter:{title:"trojan\u4f7f\u7528\u8bb0\u5f55",authors:["jabberwocky238"],tags:["zh","tech"]},unlisted:!1,lastUpdatedAt:1730475546e3,lastUpdatedBy:"jabberwocky238",prevItem:{title:"markdown\u4e0a\u4f20\u77e5\u4e4e\u6700\u4f73\u5b9e\u8df5",permalink:"/blog/2024/11/02/zhihu-markdown-best-practice"},nextItem:{title:"\u81ea\u5efaVPN+DNS\u5b9e\u73b0\u5185\u7f51\u7a7f\u900f\u548c\u7ec4\u7f51",permalink:"/blog/2024/10/27/setting-your-own-vpn"}},i={authorsImageUrls:[void 0]},c=[{value:"\u670d\u52a1\u7aef(linux)",id:"\u670d\u52a1\u7aeflinux",level:2},{value:"\u5ba2\u6237\u7aef(clash)",id:"\u5ba2\u6237\u7aefclash",level:2}];function p(n){const r={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.h2,{id:"\u670d\u52a1\u7aeflinux",children:"\u670d\u52a1\u7aef(linux)"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.a,{href:"https://github.com/trojan-gfw/trojan/releases",children:"trojan download"})}),"\n",(0,t.jsx)(r.p,{children:"\u9996\u5148\u4e0b\u8f7dtrojan\u3002"}),"\n",(0,t.jsx)(r.p,{children:"\u89e3\u538b\u3002"}),"\n",(0,t.jsx)(r.p,{children:"\u7533\u8bf7\u57df\u540d\uff0c\u8981crt\u548ckey\uff0c\u8fd9\u4e00\u6b65\u5f88\u91cd\u8981\u3002"}),"\n",(0,t.jsx)(r.p,{children:"config.json"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\r\n    "run_type": "server",\r\n    "local_addr": "0.0.0.0",\r\n    "local_port": 443,\r\n    "remote_addr": "127.0.0.1",\r\n    "remote_port": 80,\r\n    "password": [\r\n        "passwordpasswordpassword"\r\n    ],\r\n    "log_level": 1,\r\n    "ssl": {\r\n        "cert": "/home/ubuntu/nginx/xxx.site_nginx/xxx.site_bundle.crt",\r\n        "key": "/home/ubuntu/nginx/xxx.site_nginx/xxx.site.key",\r\n        "key_password": "",\r\n        "cipher": "ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384",\r\n        "cipher_tls13": "TLS_AES_128_GCM_SHA256:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_256_GCM_SHA384",\r\n        "prefer_server_cipher": true,\r\n        "alpn": [\r\n            "http/1.1"\r\n        ],\r\n        "alpn_port_override": {\r\n            "h2": 81\r\n        },\r\n        "reuse_session": true,\r\n        "session_ticket": false,\r\n        "session_timeout": 600,\r\n        "plain_http_response": "",\r\n        "curves": "",\r\n        "dhparam": ""\r\n    },\r\n    "tcp": {\r\n        "prefer_ipv4": false,\r\n        "no_delay": true,\r\n        "keep_alive": true,\r\n        "reuse_port": false,\r\n        "fast_open": false,\r\n        "fast_open_qlen": 20\r\n    },\r\n    "mysql": {\r\n        "enabled": false,\r\n        "server_addr": "127.0.0.1",\r\n        "server_port": 3306,\r\n        "database": "trojan",\r\n        "username": "trojan",\r\n        "password": "",\r\n        "key": "",\r\n        "cert": "",\r\n        "ca": ""\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(r.admonition,{type:"tip",children:(0,t.jsx)(r.p,{children:"tcp\u7684reuse_port\u548cfast_open\uff0c\u80fd\u5f00\u5c31\u5f00\uff08\u9700\u8981\u5185\u6838\u652f\u6301\uff0c\u8bf7\u770btrojan\u6587\u6863\uff09\uff0c\u4f1a\u6781\u5927\u589e\u52a0\u4f53\u9a8c\u611f\uff0c\u5426\u5219tcp\u8fde\u63a5\u7ecf\u5e38\u65ad\uff0c\u7f51\u7ad9\u6253\u5f00\u4e00\u534a404\u4e86\uff0c\u8c01\u90fd\u53d7\u4e0d\u4e86\u3002"})}),"\n",(0,t.jsx)(r.p,{children:"\u9664\u4e86\u9700\u8981\u6539crt\u6587\u4ef6\u548ckey\u6587\u4ef6\u7684\u4f4d\u7f6e\u4ee5\u5916\u3002"}),"\n",(0,t.jsxs)(r.p,{children:["\u6539\u5bc6\u7801\uff0c\u5bc6\u7801\u53ef\u4ee5\u6709\u5f88\u591a\uff0c",(0,t.jsx)(r.strong,{children:"\u4e00\u5b9a\u8981\u6539\uff0c\u5426\u5219\u5c31\u662f\u88f8\u5954"}),"\u3002"]}),"\n",(0,t.jsx)(r.p,{children:"\u5176\u4ed6\u522b\u52a8\uff0c\u4ec0\u4e48\u90fd\u4e0d\u52a8\u3002"}),"\n",(0,t.jsx)(r.h2,{id:"\u5ba2\u6237\u7aefclash",children:"\u5ba2\u6237\u7aef(clash)"}),"\n",(0,t.jsx)(r.p,{children:"\u6559\u7a0b\uff1a"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"https://www.codein.icu/clashtutorial/#proxy-group",children:"codein.icu"})}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"config.yaml"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-yaml",children:'\r\nmixed-port: 7890\r\nallow-lan: true\r\nbind-address: "*"\r\nmode: rule\r\nlog-level: info\r\nexternal-controller: "127.0.0.1:9090"\r\ndns:\r\n    enable: false\r\n    ipv6: false\r\n    default-nameserver: [223.5.5.5, 119.29.29.29]\r\n    enhanced-mode: fake-ip\r\n    fake-ip-range: 198.18.0.1/16\r\n    use-hosts: true\r\n    nameserver:\r\n        ["https://doh.pub/dns-query", "https://dns.alidns.com/dns-query"]\r\n    fallback:\r\n        [\r\n            "https://doh.dns.sb/dns-query",\r\n            "https://dns.cloudflare.com/dns-query",\r\n            "https://dns.twnic.tw/dns-query",\r\n            "tls://8.8.4.4:853",\r\n        ]\r\n    fallback-filter: { geoip: true, ipcidr: [240.0.0.0/4, 0.0.0.0/32] }\r\nproxies:\r\n    - { name: \u5c0f\u5361\u62c9\u7c73, type: trojan, server: \u57df\u540d, port: 443, password: \u5bc6\u7801, udp: true, skip-cert-verify: true }\r\nproxy-groups:\r\n    - { name: \u5c0f\u5361\u62c9\u7c73\u673a\u573a, type: select, proxies: [\u5c0f\u5361\u62c9\u7c73] }\r\nrules:\r\n    - "DOMAIN-KEYWORD,google,\u5c0f\u5361\u62c9\u7c73"\r\n    - "DOMAIN-KEYWORD,youtube,\u5c0f\u5361\u62c9\u7c73"\r\n    - "DOMAIN-KEYWORD,github,\u5c0f\u5361\u62c9\u7c73"\r\n    - "DOMAIN-KEYWORD,docker,\u5c0f\u5361\u62c9\u7c73"\r\n    - "DOMAIN-SUFFIX,poe.com,\u5c0f\u5361\u62c9\u7c73"\r\n    \r\n    - "DOMAIN-SUFFIX,local,DIRECT"\r\n    - "IP-CIDR,127.0.0.0/8,DIRECT"\r\n    - "IP-CIDR,172.16.0.0/12,DIRECT"\r\n    - "IP-CIDR,192.168.0.0/16,DIRECT"\r\n    - "IP-CIDR,10.0.0.0/8,DIRECT"\r\n    - "IP-CIDR,17.0.0.0/8,DIRECT"\r\n    - "IP-CIDR,100.64.0.0/10,DIRECT"\r\n    - "IP-CIDR,224.0.0.0/4,DIRECT"\r\n    - "IP-CIDR6,fe80::/10,DIRECT"\r\n    - "GEOIP,CN,DIRECT"\r\n    - "MATCH,DIRECT"\n'})})]})}function d(n={}){const{wrapper:r}={...(0,s.R)(),...n.components};return r?(0,t.jsx)(r,{...n,children:(0,t.jsx)(p,{...n})}):p(n)}},28453:(n,r,e)=>{e.d(r,{R:()=>a,x:()=>l});var t=e(96540);const s={},o=t.createContext(s);function a(n){const r=t.useContext(o);return t.useMemo((function(){return"function"==typeof n?n(r):{...r,...n}}),[r,n])}function l(n){let r;return r=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:a(n.components),t.createElement(o.Provider,{value:r},n.children)}}}]);