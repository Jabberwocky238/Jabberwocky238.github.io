"use strict";(self.webpackChunkjabberwocky238_github_io=self.webpackChunkjabberwocky238_github_io||[]).push([[9597],{17759:(t,e,o)=>{o.r(e),o.d(e,{default:()=>a});var n=o(44586),i=o(28244),s=o(96540),r=o(74848);function a(){const{siteConfig:t}=(0,n.A)(),[e,a]=(0,s.useState)(0),[h,d]=(0,s.useState)([0,0]),[c,l]=(0,s.useState)(!1),[g,u]=(0,s.useState)("unknown");return(0,s.useEffect)((()=>{const t=o(24271),{remove:e,register:n}=t.init();return n({getLength:t=>{a(t)},getHeadPos:t=>{d(t)},getLiveState:t=>{l(t)},getSteer:t=>{u(t)}}),e}),[]),(0,r.jsxs)(i.A,{noFooter:!0,title:`\u8d2a\u5403\u86c7 | from ${t.title}`,description:"\u8d2a\u5403\u86c7",children:[(0,r.jsx)("main",{style:{display:"flex",justifyContent:"center"},children:(0,r.jsx)("canvas",{id:"caonimab"})}),(0,r.jsxs)("center",{children:[(0,r.jsx)("strong",{children:"\u624b\u673a\u7ad6\u5c4f\u6e38\u73a9\uff0c\u517c\u5bb9\u5ea6\u5dee\uff0c\u76ee\u524d\u4e0d\u6b63\u5e38"}),(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"WASD\u63a7\u5236\u65b9\u5411\uff0c\u6b7b\u4e86\u5237\u65b0\u7f51\u9875"}),(0,r.jsx)("br",{}),(0,r.jsxs)("strong",{children:["\u957f\u5ea6\uff1a",e,"\uff0c\u5934\u90e8\u4f4d\u7f6e\uff1a[",h[0],", ",h[1],"]\uff0c\u65b9\u5411\uff1a",g,", \u72b6\u6001\uff1a",c?"\u6b7b\u4ea1":"\u5065\u5eb7"]})]})]})}},24271:(t,e,o)=>{o.r(e),o.d(e,{init:()=>g});var n=o(47953),i=o.n(n);var s,r;const a=20;function h(){return window.matchMedia("only screen and (max-width: 767px)").matches}function d(t,e){t.rect(e[0]*a,e[1]*a,(e[0]+1)*a,(e[1]+1)*a)}class c{constructor(){this.body=[[3,0],[3,1],[3,2],[3,3],[3,4]],this.direction=[0,1],this.head_to=[3,5],this.lengthen=!1}turnUp(){1!==this.direction[1]&&(this.direction=[0,-1])}turnDown(){-1!==this.direction[1]&&(this.direction=[0,1])}turnLeft(){1!==this.direction[0]&&(this.direction=[-1,0])}turnRight(){-1!==this.direction[0]&&(this.direction=[1,0])}get steer(){switch(this.direction[0]){case 1:return"right";case-1:return"left"}switch(this.direction[1]){case 1:return"down";case-1:return"up"}return"unknown"}get head(){return this.body[this.body.length-1]}try_eat(){this.head_to=this.body[this.body.length-1]}includes(t){for(let e=0;e<this.body.length;e++)if(this.body[e][0]===t[0]&&this.body[e][1]===t[1])return!0;return!1}move(){let t=[...this.body[this.body.length-1]];switch(this.direction[0]){case 1:t[0]+=1;break;case-1:t[0]-=1}switch(this.direction[1]){case 1:t[1]+=1;break;case-1:t[1]-=1}return-1===t[0]||t[0]===s||-1===t[1]||t[1]===r||(!!this.includes(t)||(this.body.push(t),this.lengthen?this.lengthen=!1:this.body.shift(),!1))}}class l{constructor(){this.map=new Array(s).fill(0).map((()=>new Array(r).fill(0))),this.make_food()}draw(t,e){this.food[0]==e.head_to[0]&&this.food[1]==e.head_to[1]&&(e.lengthen=!0,this.make_food(),console.log("eat"));for(let o=0;o<s;o++)for(let n=0;n<r;n++)e.includes([o,n])?t.fill(0):this.food[0]===o&&this.food[1]===n?t.fill(255,255,0):t.fill(200),d(t,[o,n]);console.log(e.body[e.body.length-1],this.food)}make_food(){this.food=[Math.floor(Math.random()*s),Math.floor(Math.random()*r)]}}const g=()=>{let t={getLength:void 0,getHeadPos:void 0,getLiveState:void 0};const e=new(i())((e=>{let o,n,i,d;e.preload=()=>{},e.setup=()=>{o=document.getElementById("caonimab"),s=Math.floor(.8*window.innerWidth/20),r=Math.floor(.8*window.innerHeight/20);const t=h()?20:40;s=s>t?t:s,r=r>t?t:r,n=new c,function(t){h()&&(console.log("This is a mobile device."),window.addEventListener("deviceorientation",(e=>{var o=e.absolute,n=e.alpha,i=e.beta,s=e.gamma;console.log(o,n,i,s),n>=0&&n<=90?t.turnDown():n>90&&n<=180?t.turnLeft():n>180&&n<=270?t.turnUp():n>270&&n<=360?t.turnRight():console.log(n)}))),document.addEventListener("keydown",(function(e){switch(e.key){case"w":t.turnUp(),console.log("w");break;case"a":t.turnLeft(),console.log("a");break;case"s":t.turnDown(),console.log("s");break;case"d":t.turnRight(),console.log("d")}}))}(n),i=new l,e.createCanvas(s*a,r*a,o),e.frameRate(7)},e.draw=()=>{e.background(200),e.fill(200),e.rect(0,0,s*a,r*a),n.try_eat(),i.draw(e,n),t.getLength&&t.getLength(n.body.length),t.getHeadPos&&t.getHeadPos(n.body[n.body.length-1]),t.getSteer&&t.getSteer(n.steer),d=n.move(),t.getLiveState&&t.getLiveState(d),d&&e.noLoop()}}));return{remove:()=>{e.remove()},register:e=>{t={...t,...e}}}}}}]);