"use strict";(self.webpackChunkjabberwocky238_github_io=self.webpackChunkjabberwocky238_github_io||[]).push([[4949],{8511:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>d,toc:()=>o});var s=r(4848),i=r(8453);const l={sidebar_position:2,sidebar_label:"Cargo.toml"},c="Cargo.toml",d={id:"Cargo.toml",title:"Cargo.toml",description:"[workspace]",source:"@site/docs/rust/02-Cargo.toml.md",sourceDirName:".",slug:"/Cargo.toml",permalink:"/rust/Cargo.toml",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,sidebar_label:"Cargo.toml"},sidebar:"tutorialSidebar",previous:{title:"README.md",permalink:"/rust/"},next:{title:"\u7f16\u7801\u4e60\u60ef Coding Style",permalink:"/rust/Coding_Style"}},t={},o=[{value:"[workspace]",id:"workspace",level:2},{value:"\u4f5c\u7528",id:"\u4f5c\u7528",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:3},{value:"\u8be6\u7ec6\u9009\u9879",id:"\u8be6\u7ec6\u9009\u9879",level:3},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:3},{value:"\u771f\u5b9e\u6848\u4f8b",id:"\u771f\u5b9e\u6848\u4f8b",level:2}];function a(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"cargotoml",children:"Cargo.toml"})}),"\n",(0,s.jsx)(e.h2,{id:"workspace",children:"[workspace]"}),"\n",(0,s.jsxs)(e.p,{children:["\u5728 Rust \u7684 Cargo \u7cfb\u7edf\u91cc\uff0c",(0,s.jsx)(e.code,{children:"[workspace]"})," \u90e8\u5206\u7528\u4e8e\u5b9a\u4e49\u4e00\u4e2a\u5de5\u4f5c\u533a\uff08workspace\uff09\uff0c\u5b83\u5141\u8bb8\u4f60\u7ba1\u7406\u591a\u4e2acrate\uff0c\u8fd9\u4e9bcrate \u901a\u5e38\u88ab\u79f0\u4e3a\u6210\u5458crate\u3002\u5de5\u4f5c\u533a\u662f\u4e00\u79cd\u7ec4\u7ec7\u591a\u4e2a\u76f8\u5173\u9879\u76ee\u7684\u65b9\u6cd5\uff0c\u5b83\u53ef\u4ee5\u8ba9\u4f60\u5171\u4eab\u4f9d\u8d56\u9879\u3001\u7f16\u8bd1\u53c2\u6570\u548c\u7279\u6027\u3002"]}),"\n",(0,s.jsx)(e.h3,{id:"\u4f5c\u7528",children:"\u4f5c\u7528"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u96c6\u4e2d\u7ba1\u7406"}),"\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4f7f\u7528\u5de5\u4f5c\u533a\u53ef\u4ee5\u96c6\u4e2d\u7ba1\u7406\u591a\u4e2acrate\u7684\u7248\u672c\u548c\u4f9d\u8d56\uff0c\u65b9\u4fbf\u7edf\u4e00\u5347\u7ea7\u548c\u7ef4\u62a4\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u5171\u4eab\u4f9d\u8d56"}),"\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5de5\u4f5c\u533a\u4e2d\u7684\u6240\u6709crate\u53ef\u4ee5\u5171\u4eab\u76f8\u540c\u7684\u4f9d\u8d56\uff0c\u907f\u514d\u91cd\u590d\u6dfb\u52a0\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u540c\u6b65\u53d1\u5e03"}),"\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4f60\u53ef\u4ee5\u4e00\u6b21\u6027\u53d1\u5e03\u5de5\u4f5c\u533a\u4e2d\u7684\u591a\u4e2acrate\uff0c\u786e\u4fdd\u5b83\u4eec\u90fd\u662f\u517c\u5bb9\u7684\u7248\u672c\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u8de8 crate \u7279\u6027"}),"\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4f60\u53ef\u4ee5\u5b9a\u4e49\u8de8 crate \u7684\u7279\u6027\uff0c\u4ee5\u4fbf\u4e8e\u5728\u5f00\u53d1\u65f6\u542f\u7528\u6216\u7981\u7528\u67d0\u4e9b\u529f\u80fd\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n",(0,s.jsx)(e.p,{children:"\u5047\u8bbe\u4f60\u6709\u4e00\u4e2a\u5305\u542b\u4e24\u4e2a crate \u7684\u5de5\u4f5c\u533a\uff1a\u4e00\u4e2a\u516c\u5171\u5e93\u548c\u4e00\u4e2a\u547d\u4ee4\u884c\u5e94\u7528\u7a0b\u5e8f\uff0c\u547d\u4ee4\u884c\u5e94\u7528\u7a0b\u5e8f\u4f9d\u8d56\u4e8e\u8fd9\u4e2a\u5e93\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-toml",children:'# Cargo.toml (\u5de5\u4f5c\u533a\u6839\u76ee\u5f55)\r\n[workspace]\r\n\r\nmembers = [\r\n    "crates/lib",\r\n    "crates/bin"\r\n]\r\n\r\n[package]\r\nname = "my-workspace"\r\nversion = "0.1.0"\r\nedition = "2021"\r\n\r\n# \u53ef\u4ee5\u4e3a\u6574\u4e2a\u5de5\u4f5c\u533a\u5b9a\u4e49\u4f9d\u8d56\r\n[dependencies]\r\nmy-lib = { path = "crates/lib" }\n'})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-toml",children:'# Cargo.toml (crates/lib\u76ee\u5f55)\r\n[package]\r\nname = "my-lib"\r\nversion = "0.1.0"\r\nedition = "2021"\r\n\r\n[lib]\r\npath = "src/lib.rs"\n'})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-toml",children:'# Cargo.toml (crates/bin\u76ee\u5f55)\r\n[package]\r\nname = "my-bin"\r\nversion = "0.1.0"\r\nedition = "2021"\r\n\r\n[[bin]]\r\nname = "my-bin"\r\npath = "src/main.rs"\r\n\r\n[dependencies]\r\nmy-lib = { path = "../lib" }\n'})}),"\n",(0,s.jsx)(e.h3,{id:"\u8be6\u7ec6\u9009\u9879",children:"\u8be6\u7ec6\u9009\u9879"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:(0,s.jsx)(e.code,{children:"members"})}),"\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5b9a\u4e49\u5de5\u4f5c\u533a\u7684\u6210\u5458\u5217\u8868\uff0c\u53ef\u4ee5\u662f\u8def\u5f84\u6216\u540d\u79f0\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:(0,s.jsx)(e.code,{children:"packages"})}),"\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5b9a\u4e49\u5de5\u4f5c\u533a\u7684\u5305\u5217\u8868\uff0c\u53ef\u4ee5\u662f\u8def\u5f84\u6216\u540d\u79f0\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:(0,s.jsx)(e.code,{children:"exclude"})}),"\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5b9a\u4e49\u8981\u6392\u9664\u7684\u6210\u5458\u5217\u8868\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:(0,s.jsx)(e.code,{children:"include"})}),"\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u5b9a\u4e49\u8981\u5305\u542b\u7684\u6210\u5458\u5217\u8868\uff0c\u5373\u4f7f\u5b83\u4eec\u901a\u5e38\u88ab ",(0,s.jsx)(e.code,{children:"exclude"})," \u6392\u9664\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u4f7f\u7528",children:"\u4f7f\u7528"}),"\n",(0,s.jsxs)(e.p,{children:["\u4f7f\u7528\u5de5\u4f5c\u533a\u65f6\uff0c\u4f60\u53ef\u4ee5\u5728\u5de5\u4f5c\u533a\u7684\u6839\u76ee\u5f55\u8fd0\u884c Cargo \u547d\u4ee4\uff0c\u5982 ",(0,s.jsx)(e.code,{children:"cargo build"}),"\u3001",(0,s.jsx)(e.code,{children:"cargo test"})," \u548c ",(0,s.jsx)(e.code,{children:"cargo run"}),"\uff0cCargo \u4f1a\u6839\u636e\u5b9a\u4e49\u7684\u6210\u5458\u6267\u884c\u76f8\u5e94\u7684\u64cd\u4f5c\u3002"]}),"\n",(0,s.jsx)(e.h3,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"[workspace]"})," \u5728 ",(0,s.jsx)(e.code,{children:"Cargo.toml"})," \u4e2d\u5b9a\u4e49\u4e86\u5de5\u4f5c\u533a\u7684\u914d\u7f6e\uff0c\u5b83\u5141\u8bb8\u4f60\u66f4\u6709\u6548\u5730\u7ba1\u7406\u591a\u4e2a\u76f8\u5173\u7684 Rust \u9879\u76ee\u3002\u901a\u8fc7\u96c6\u4e2d\u7ba1\u7406\u4f9d\u8d56\u548c\u6784\u5efa\u914d\u7f6e\uff0c\u4f60\u53ef\u4ee5\u7b80\u5316\u5f00\u53d1\u6d41\u7a0b\u5e76\u786e\u4fdd\u8de8\u9879\u76ee\u7684\u4e00\u81f4\u6027\u3002"]}),"\n",(0,s.jsx)(e.h2,{id:"\u771f\u5b9e\u6848\u4f8b",children:"\u771f\u5b9e\u6848\u4f8b"}),"\n",(0,s.jsx)(e.p,{children:"serde"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-toml",children:'[dependencies]\r\nserde_derive = { version = "1", optional = true, path = "../serde_derive" }\r\n\r\n[dev-dependencies]\r\nserde_derive = { version = "1", path = "../serde_derive" }\r\n\r\n[features] # \u9664\u4e86default\uff0c\u5269\u4e0b\u90fd\u662f\u53ef\u9009\u7279\u6027\u5217\u8868\uff0c\u4e2d\u62ec\u53f7\u5185\u7684\u662f\u4f9d\u8d56\u9879\r\ndefault = ["std"]\r\nderive = ["serde_derive"]\r\nstd = []\r\nunstable = []\r\nalloc = []\r\nrc = []\n'})}),"\n",(0,s.jsx)(e.p,{children:"tao"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-toml",children:'[package.metadata.docs.rs]\r\nfeatures = [ "rwh_04", "rwh_05", "rwh_06", "serde" ]\r\ndefault-target = "x86_64-unknown-linux-gnu"\r\ntargets = [\r\n  "i686-pc-windows-msvc",\r\n  "x86_64-pc-windows-msvc",\r\n  "i686-unknown-linux-gnu",\r\n  "x86_64-unknown-linux-gnu",\r\n  "x86_64-apple-darwin"\r\n]\r\n\r\n[workspace]\r\nmembers = [ "tao-macros" ]\r\n\r\n[target."cfg(target_os = \\"windows\\")".dev-dependencies]\r\nsoftbuffer = "0.4"\r\n\r\n[target."cfg(any(target_os = \\"android\\", target_os = \\"windows\\"))".dependencies]\r\nonce_cell = "1"\r\n\r\n[target."cfg(target_os = \\"android\\")".dependencies]\r\njni = "0.21"\r\nndk = "0.9"\r\nndk-sys = "0.6"\r\nndk-context = "0.1"\r\ntao-macros = { version = "0.1.0", path = "./tao-macros" }\r\n\r\n[target."cfg(any(target_os = \\"ios\\", target_os = \\"macos\\"))".dependencies]\r\nobjc = "0.2"\r\n\r\n[target."cfg(target_os = \\"macos\\")".dependencies]\r\ncocoa = "0.26"\r\ncore-foundation = "0.10"\r\ncore-graphics = "0.24"\r\ndispatch = "0.2"\r\nscopeguard = "1.2"\r\n\r\n[target."cfg(any(target_os = \\"linux\\", target_os = \\"dragonfly\\", target_os = \\"freebsd\\", target_os = \\"openbsd\\", target_os = \\"netbsd\\"))".dependencies]\r\ngtk = "0.18"\r\ngdkx11-sys = "0.18"\r\ngdkwayland-sys = "0.18.0"\r\nx11-dl = "2.21"\r\nparking_lot = "0.12"\r\ndlopen2 = "0.7.0"\n'})})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(a,{...n})}):a(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>c,x:()=>d});var s=r(6540);const i={},l=s.createContext(i);function c(n){const e=s.useContext(l);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:c(n.components),s.createElement(l.Provider,{value:e},n.children)}}}]);