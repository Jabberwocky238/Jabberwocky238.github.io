---
export const prerender = true;

// import fs from 'node:fs';
// import path from 'node:path';
import {FolderItem, getRootUriStrcuture} from './base/fs'

export async function getStaticPaths() {
  let fditems: FolderItem[] = getRootUriStrcuture()
  fditems = fditems.filter(item => !item.isDir)
  const pages = fditems.map((item) => ({
    slug: item.urlPath.join('/') ,
    title: item.uriName,
    text: item.urlPath
  }))
  // console.log(pages.length, pages)  
  // const pages = [
  //   {
  //     slug: undefined,
  //     title: "Astro Store",
  //     text: "Welcome to the Astro store!",
  //   },
  //   {
  //     slug: "products",
  //     title: "Astro products",
  //     text: "We have lots of products for you",
  //   },
  //   {
  //     slug: "products/astro-handbook",
  //     title: "The ultimate Astro handbook",
  //     text: "If you want to learn Astro, you must read this book.",
  //   },
  // ];
  return pages.map(({ slug, title, text }) => {
    return {
      params: { slug },
      props: { title, text },
    };
  });
}

const { title, text } = Astro.props;
import Layout from '../layouts/Layout.astro';
import Sidebar from './base/sidebar';
import Home from './base/page';

---
<Layout title={title}>
  <div style="display: flex;">
    <Sidebar></Sidebar>
    <Home slug={text}></Home>
  </div>
</Layout>